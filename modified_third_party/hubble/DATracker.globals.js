!function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function u(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l,d,p,f,h={DEBUG:!1,LIB_VERSION:"1.6.14"},_=function(e,t){if("[object Array]"!==Object.prototype.toString.apply(e))return-1;if(!e&&!t)return-1;for(var r=0;r<e.length;r++)if("function"==typeof e[r].indexOf&&e[r].indexOf(t)>0)return r;return-1},g=(l="undefined"==typeof window?{navigator:{userAgent:""},document:{}}:window).document,b=l.navigator.userAgent;p=l.device,d={},l.device=d,g.documentElement,b=b.toLowerCase(),d.ios=function(){return d.iphone()||d.ipod()||d.ipad()},d.iphone=function(){return!d.windows()&&f("iphone")},d.ipod=function(){return f("ipod")},d.ipad=function(){return f("ipad")},d.android=function(){return!d.windows()&&f("android")},d.androidPhone=function(){return d.android()&&f("mobile")},d.androidTablet=function(){return d.android()&&!f("mobile")},d.blackberry=function(){return f("blackberry")||f("bb10")||f("rim")},d.blackberryPhone=function(){return d.blackberry()&&!f("tablet")},d.blackberryTablet=function(){return d.blackberry()&&f("tablet")},d.windows=function(){return f("windows")},d.windowsPhone=function(){return d.windows()&&f("phone")},d.windowsTablet=function(){return d.windows()&&f("touch")&&!d.windowsPhone()},d.fxos=function(){return(f("(mobile;")||f("(tablet;"))&&f("; rv:")},d.fxosPhone=function(){return d.fxos()&&f("mobile")},d.fxosTablet=function(){return d.fxos()&&f("tablet")},d.meego=function(){return f("meego")},d.cordova=function(){return l.cordova&&"file:"===location.protocol},d.nodeWebkit=function(){return"object"===r(l.process)},d.mobile=function(){return d.androidPhone()||d.iphone()||d.ipod()||d.windowsPhone()||d.blackberryPhone()||d.fxosPhone()||d.meego()},d.tablet=function(){return d.ipad()||d.androidTablet()||d.blackberryTablet()||d.windowsTablet()||d.fxosTablet()},d.desktop=function(){return!d.tablet()&&!d.mobile()},d.television=function(){var e,t=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];for(e=0;e<t.length;){if(f(t[e]))return!0;e++}return!1},d.portrait=function(){return l.innerHeight/l.innerWidth>1},d.landscape=function(){return l.innerHeight/l.innerWidth<1},d.noConflict=function(){return l.device=p,this},f=function(e){return-1!==b.indexOf(e)},d.devicePlatform=function(){var e="web";return d.ios()?d.ipad()?e="iPad":d.iphone()?e="iPhone":d.ipod()&&(e="iPod touch"):e=d.android()?d.androidTablet()?"Tablet":"Phone":d.blackberry()?d.blackberryTablet()?"Tablet":"Phone":d.windows()?d.windowsTablet()?"Tablet":d.windowsPhone()?"Phone":"web":d.fxos()?d.fxosTablet()?"Tablet":"Phone":d.meego()?"Phone":"web",e},d.deviceModel=function(){var e="";if(d.android()){var t=l.navigator.userAgent.split(";"),r=_(t,"Build/");r>-1&&(e=t[r].substring(0,t[r].indexOf("Build/")))}else d.ios()&&d.iphone()&&(e="iPhone");return e},Object.prototype.hasOwnProperty.call(l,"onorientationchange");var v,y=d;v="undefined"==typeof window?{navigator:{}}:window;var k,w=Array.prototype,T=Function.prototype,S=Object.prototype,x=w.slice,D=S.toString,A=S.hasOwnProperty,O=v.console,I=v.navigator,C=v.document,N=I.userAgent,P=T.bind,E=w.forEach,U=w.indexOf,j=Array.isArray,L={},q={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},R=function(){if(h.DEBUG&&!q.isUndefined(O)&&O)try{O.log.apply(O,arguments)}catch(e){q.each(arguments,(function(e){O.log(e)}))}},B=function(){if(h.DEBUG&&!q.isUndefined(O)&&O){var e=["DATracker error:"].concat(q.toArray(arguments));try{O.error.apply(O,e)}catch(t){q.each(e,(function(e){O.error(e)}))}}},z=function(){if(!q.isUndefined(O)&&O){var e=["DATracker error:"].concat(q.toArray(arguments));try{O.error.apply(O,e)}catch(t){q.each(e,(function(e){O.error(e)}))}}},M="-1",$=v.external,V=(N=v.navigator.userAgent||"",v.navigator.appVersion||""),H=v.navigator.vendor||"",J=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,F=/\bbb10\b.+?\bversion\/([\d.]+)/,K=/\bblackberry\b.+\bversion\/([\d.]+)/,W=/\bblackberry\d+\/([\d.]+)/;var G=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm\b|redmi[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],Y=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["iOS",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["Android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(F)||e.match(K)||e.match(W);return t?{version:t[1]}:"blackberry"}]],X=[["edgehtml",/edge\/([0-9.]+)/],["trident",J],["blink",function(){return"chrome"in v&&"CSS"in v&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t;if(t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],Q=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=Z("theworld");return void 0!==e?e:"theworld"}],["360",function(e){var t=Z("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if($&&($.mxVersion||$.max_version))return{version:$.mxVersion||$.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t;try{$&&$.LiebaoGetVersion&&(t=$.LiebaoGetVersion())}catch(e){}return{version:t||M}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",J],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(F)||e.match(K)||e.match(W);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];function Z(e){if($)try{var t=$.twGetRunPath.toLowerCase(),r=$.twGetSecurityID(v),n=$.twGetVersion(r);if(t&&-1===t.indexOf(e))return!1;if(n)return{version:n}}catch(e){}}function ee(e,t,r){var n="[object Function]"===D(t)?t.call(null,r):t;if(!n)return null;var i={name:e,version:M,codename:""},o=D(n);if(!0===n)return i;if("[object String]"===o){if(-1!==r.indexOf(n))return i}else{if(function(e){return"[object Object]"===D(e)}(n))return n.hasOwnProperty("version")&&(i.version=n.version),i;if(n.exec){var a=n.exec(r);if(a)return a.length>=2&&a[1]?i.version=a[1].replace(/_/g,"."):i.version=M,i}}}var te={name:"",version:""};function re(e,t,r,n){var i=te;!function(e,t){for(var r=0,n=e.length;r<n&&!1!==t.call(e,e[r],r);r++);}(t,(function(t){var r=ee(t[0],t[1],e);if(r)return i=r,!1})),r.call(n,i.name,i.version)}var ne,ie,oe,ae,se,ce,ue,le,de,pe,fe,he,_e;function ge(e){var t=null,n=null,i=e||{};window.hubbledata_app_js_bridge_call_js=function(e){!function(e){t=e,q.isJSONString(t)&&(t=JSON.parse(t)),n&&n(t)}(e)};return{getAppStatus:function(e){if(function(){if(/hubbledata-sdk-ios/.test(navigator.userAgent)){i.pageOpenScene="App";var e=document.createElement("iframe");e.setAttribute("src","hubbledata://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"===r(window.HubbleData_APP_JS_Bridge)&&window.HubbleData_APP_JS_Bridge.hubbledata_call_app&&(i.pageOpenScene="App",t=HubbleData_APP_JS_Bridge.hubbledata_call_app(),q.isJSONString(t)&&(t=JSON.parse(t))),!e)return t;null===t?n=e:e(t)},getSendCall:function(e,t,n,o){e=q.JSONDecode(e),q.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],t)?("function"==typeof o&&o(),"function"==typeof n&&n()):"object"===r(window.HubbleData_APP_JS_Bridge)&&window.HubbleData_APP_JS_Bridge.hubbledata_track?(i.pageOpenScene="App",e.pageOpenScene="App",e=q.JSONEncode(e),window.HubbleData_APP_JS_Bridge.hubbledata_track(e),"function"==typeof n&&n()):/hubbledata-sdk-ios/.test(navigator.userAgent)?(i.pageOpenScene="App",e.pageOpenScene="App",function(e){var t=document.createElement("iframe");t.setAttribute("src","hubbledata://trackEvent?event="+encodeURIComponent(e)),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}(e=q.JSONEncode(e)),"function"==typeof n&&n()):("function"==typeof o&&o(),"function"==typeof n&&n())}}}k=function(e){e=(e||"").toLowerCase();var t={};re(e,G,(function(e,r){var n=parseFloat(r);t.device={name:e,version:n,fullVersion:r},t.device[e]=n}),t),re(e,Y,(function(e,r){var n=parseFloat(r);t.os={name:e,version:n,fullVersion:r},t.os[e]=n}),t);var r=function(e){if(!J.test(e))return null;var t,r,n,i,o;if(-1!==e.indexOf("trident/")&&(t=/\btrident\/([0-9.]+)/.exec(e))&&t.length>=2){n=t[1];var a=t[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}i=(t=J.exec(e))[1];var s=t[1].split(".");return void 0===o&&(o=i),s[0]=parseInt(s[0],10)-4,r=s.join("."),void 0===n&&(n=r),{browserVersion:o,browserMode:i,engineVersion:n,engineMode:r,compatible:n!==r}}(e);return re(e,X,(function(e,n){var i=n;r&&(n=r.engineVersion||r.engineMode,i=r.engineMode);var o=parseFloat(n);t.engine={name:e,version:o,fullVersion:n,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},t.engine[e]=o}),t),re(e,Q,(function(e,n){var i=n;r&&("ie"===e&&(n=r.browserVersion),i=r.browserMode);var o=parseFloat(n);t.browser={name:e,version:o,fullVersion:n,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},t.browser[e]=o}),t),t}(N+" "+V+" "+H),q.trim=function(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")},q.checkTime=function(e){return!!e&&!!/^(\d{4})-(\d{2})-(\d{2})$/.test(e)},q.bind=function(e,t){var r,n;if(P&&e.bind===P)return P.apply(e,x.call(arguments,1));if(!q.isFunction(e))throw new TypeError;return r=x.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(x.call(arguments)));var i={};i.prototype=e.prototype;var o=new i;i.prototype=null;var a=e.apply(o,r.concat(x.call(arguments)));return Object(a)===a?a:o},n},q.bind_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=q.bind(e[t],e))},q.each=function(e,t,r){if(null!=e)if(E&&e.forEach===E)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===L)return}else for(var o in e)if(A.call(e,o)&&t.call(r,e[o],o,e)===L)return},q.escapeHTML=function(e){var t=e;return t&&q.isString(t)&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),t},q.extend=function(e){return q.each(x.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])})),e},q.deepMerge=function(e,t){var r;for(r in t)e[r]=e[r]&&"[object Object]"===e[r].toString()?q.deepMerge(e[r],t[r]):e[r]=t[r];return e},q.isArray=j||function(e){return"[object Array]"===Object.prototype.toString.apply(e)},q.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},q.isArguments=function(e){return!(!e||!A.call(e,"callee"))},q.toArray=function(e){return e?e.toArray?e.toArray():q.isArray(e)||q.isArguments(e)?x.call(e):q.values(e):[]},q.values=function(e){var t=[];return null===e||q.each(e,(function(e){t[t.length]=e})),t},q.identity=function(e){return e},q.include=function(e,t){var r=!1;return null===e?r:U&&e.indexOf===U?-1!=e.indexOf(t):(q.each(e,(function(e){if(r||(r=e===t))return L})),r)},q.includes=function(e,t){return-1!==e.indexOf(t)},q.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},q.isObject=function(e){return e===Object(e)&&!q.isArray(e)},q.isEmptyObject=function(e){if(q.isObject(e)){for(var t in e)if(A.call(e,t))return!1;return!0}return!1},q.isUndefined=function(e){return void 0===e},q.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},q.isDate=function(e){return"[object Date]"==D.call(e)},q.isNumber=function(e){return"[object Number]"==D.call(e)},q.isElement=function(e){return!(!e||1!==e.nodeType)},q.encodeDates=function(e){return q.each(e,(function(t,r){q.isDate(t)?e[r]=q.formatDate(t):q.isObject(t)&&(e[r]=q.encodeDates(t))})),e},q.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},q.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},q.safewrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){z("Implementation error. Please contact support@DATracker.com.")}}},q.safewrap_class=function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=q.safewrap(e.prototype[t[r]])},q.safewrap_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=q.safewrap(e[t]))},q.strip_empty_properties=function(e){var t={};return q.each(e,(function(e,r){q.isString(e)&&e.length>0&&(t[r]=e)})),t},q.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):q.isArray(e)?(r=[],q.each(e,(function(e){r.push(q.truncate(e,t))}))):q.isObject(e)?(r={},q.each(e,(function(e,n){r[n]=q.truncate(e,t)}))):r=e,r},q.JSONEncode=function(e){var t=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'};return function e(n,i){var o="",a=0,s="",c="",u=0,l=o,d=[],p=i[n];switch(p&&"object"===r(p)&&"function"==typeof p.toJSON&&(p=p.toJSON(n)),r(p)){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(o+="    ",d=[],"[object Array]"===D.apply(p)){for(u=p.length,a=0;a<u;a+=1)d[a]=e(a,p)||"null";return c=0===d.length?"[]":o?"[\n"+o+d.join(",\n"+o)+"\n"+l+"]":"["+d.join(",")+"]",o=l,c}for(s in p)A.call(p,s)&&(c=e(s,p))&&d.push(t(s)+(o?": ":":")+c);return c=0===d.length?"{}":o?"{"+d.join(",")+l+"}":"{"+d.join(",")+"}",o=l,c}}("",{"":e})},q.JSONDecode=(se={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},ce=function(e){throw{name:"SyntaxError",message:e,at:ne,text:oe}},ue=function(e){return e&&e!==ie&&ce("Expected '"+e+"' instead of '"+ie+"'"),ie=oe.charAt(ne),ne+=1,ie},le=function(){var e,t="";for("-"===ie&&(t="-",ue("-"));ie>="0"&&ie<="9";)t+=ie,ue();if("."===ie)for(t+=".";ue()&&ie>="0"&&ie<="9";)t+=ie;if("e"===ie||"E"===ie)for(t+=ie,ue(),"-"!==ie&&"+"!==ie||(t+=ie,ue());ie>="0"&&ie<="9";)t+=ie,ue();if(e=+t,isFinite(e))return e;ce("Bad number")},de=function(){var e,t,r,n="";if('"'===ie)for(;ue();){if('"'===ie)return ue(),n;if("\\"===ie)if(ue(),"u"===ie){for(r=0,t=0;t<4&&(e=parseInt(ue(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof se[ie])break;n+=se[ie]}else n+=ie}ce("Bad string")},pe=function(){for(;ie&&ie<=" ";)ue()},fe=function(){var e=[];if("["===ie){if(ue("["),pe(),"]"===ie)return ue("]"),e;for(;ie;){if(e.push(ae()),pe(),"]"===ie)return ue("]"),e;ue(","),pe()}}ce("Bad array")},he=function(){var e,t={};if("{"===ie){if(ue("{"),pe(),"}"===ie)return ue("}"),t;for(;ie;){if(e=de(),pe(),ue(":"),Object.hasOwnProperty.call(t,e)&&ce('Duplicate key "'+e+'"'),t[e]=ae(),pe(),"}"===ie)return ue("}"),t;ue(","),pe()}}ce("Bad object")},ae=function(){switch(pe(),ie){case"{":return he();case"[":return fe();case'"':return de();case"-":return le();default:return ie>="0"&&ie<="9"?le():function(){switch(ie){case"t":return ue("t"),ue("r"),ue("u"),ue("e"),!0;case"f":return ue("f"),ue("a"),ue("l"),ue("s"),ue("e"),!1;case"n":return ue("n"),ue("u"),ue("l"),ue("l"),null}ce('Unexpected "'+ie+'"')}()}},function(e){var t;return oe=e,ne=0,ie=" ",t=ae(),pe(),ie&&ce("Syntax error"),t}),q.base64Encode=function(e){var t,r,n,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,u="",l=[];if(!e)return e;e=q.utf8Encode(e);do{t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[c++]=a.charAt(t)+a.charAt(r)+a.charAt(n)+a.charAt(i)}while(s<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},q.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var a=e.charCodeAt(i),s=null;a<128?r++:s=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(r>t&&(o+=e.substring(t,r)),o+=s,t=r=i+1)}return r>t&&(o+=e.substring(t,e.length)),o},q.sha1=function(e){var t,r=8;function n(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function i(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function o(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t){return e<<t|e>>>32-t}return function(e){for(var t="0123456789abcdef",r="",n=0;n<4*e.length;n++)r+=t.charAt(e[n>>2]>>8*(3-n%4)+4&15)+t.charAt(e[n>>2]>>8*(3-n%4)&15);return r}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r=Array(80),s=1732584193,c=-271733879,u=-1732584194,l=271733878,d=-1009589776,p=0;p<e.length;p+=16){for(var f=s,h=c,_=u,g=l,b=d,m=0;m<80;m++){r[m]=m<16?e[p+m]:a(r[m-3]^r[m-8]^r[m-14]^r[m-16],1);var v=o(o(a(s,5),n(m,c,u,l)),o(o(d,r[m]),i(m)));d=l,l=u,u=a(c,30),c=s,s=v}s=o(s,f),c=o(c,h),u=o(u,_),l=o(l,g),d=o(d,b)}return Array(s,c,u,l,d)}(function(e){for(var t=Array(),n=(1<<r)-1,i=0;i<e.length*r;i+=r)t[i>>5]|=(e.charCodeAt(i/r)&n)<<24-i%32;return t}(t=e),t.length*r))},q.UUID2=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},q.UUID=(_e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=String(screen.height*screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var t=_e()+"-"+Math.random().toString(16).replace(".","")+"-"+function(e){var t,r,n=I.userAgent,i=[],o=0;function a(e,t){var r,n=0;for(r=0;r<t.length;r++)n|=i[r]<<8*r;return e^n}for(t=0;t<n.length;t++)r=n.charCodeAt(t),i.unshift(255&r),i.length>=4&&(o=a(o,i),i=[]);return i.length>0&&(o=a(o,i)),o.toString(16)}()+"-"+e+"-"+_e();return t?q.sha1(t):q.sha1((String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15))}),q.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)},q.HTTPBuildQuery=function(e,t){var r,n,i=[];return q.isUndefined(t)&&(t="&"),q.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r})),i.join(t)},q.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},q.getHashParam=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},q.cookie={get:function(e){for(var t=e+"=",r=C.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=q.JSONDecode(q.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=C.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+1e3*r),a="; expires="+l.toGMTString()}i&&(s=";SameSite=None; secure"),C.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s},set:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=C.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+24*r*60*60*1e3),a="; expires="+l.toGMTString()}i&&(s=";SameSite=None; secure");var d=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s;return C.cookie=d,d},setUseHour:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=C.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+60*r*60*1e3),a="; expires="+l.toGMTString()}i&&(s=";SameSite=None; secure");var d=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s;return C.cookie=d,d},remove:function(e,t){q.cookie.set(e,"",-1,t)}},q.localStorage={error:function(e){B("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(e){q.localStorage.error(e)}return null},parse:function(e){try{return q.JSONDecode(q.localStorage.get(e))||{}}catch(e){}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){q.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){q.localStorage.error(e)}}},q.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(r,n,!!o);else{var a="on"+r,s=t[a];t[a]=function(t,r,n){var i=function(i){if(i=i||e(window.event)){var o,a,s=!0;return q.isFunction(n)&&(o=n(i)),a=r.call(t,i),!1!==o&&!1!==a||(s=!1),s}};return i}(t,n,s)}else B("No valid element provided to register_event")}}(),q.register_hash_event=function(e){q.register_event(window,"hashchange",e)},q.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}var t=/[\t\r\n]/g;function r(e,r){var n=" "+r+" ";return(" "+e.className+" ").replace(t," ").indexOf(n)>=0}function n(t){if(!C.getElementsByTagName)return[];var n,i,o,a,s,c,u,l,d,p,f=t.split(" "),h=[C];for(c=0;c<f.length;c++)if((n=f[c].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=n.split("#"))[0];var _=i[1],g=C.getElementById(_);if(!g||o&&g.nodeName.toLowerCase()!=o)return[];h=[g]}else if(n.indexOf(".")>-1){o=(i=n.split("."))[0];var b=i[1];for(o||(o="*"),a=[],s=0,u=0;u<h.length;u++)for(d="*"==o?e(h[u]):h[u].getElementsByTagName(o),l=0;l<d.length;l++)a[s++]=d[l];for(h=[],p=0,u=0;u<a.length;u++)a[u].className&&q.isString(a[u].className)&&r(a[u],b)&&(h[p++]=a[u])}else{var m=n.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/);if(m){o=m[1];var v,y=m[2],k=m[3],w=m[4];for(o||(o="*"),a=[],s=0,u=0;u<h.length;u++)for(d="*"==o?e(h[u]):h[u].getElementsByTagName(o),l=0;l<d.length;l++)a[s++]=d[l];switch(h=[],p=0,k){case"=":v=function(e){return e.getAttribute(y)==w};break;case"~":v=function(e){return e.getAttribute(y).match(new RegExp("\\b"+w+"\\b"))};break;case"|":v=function(e){return e.getAttribute(y).match(new RegExp("^"+w+"-?"))};break;case"^":v=function(e){return 0===e.getAttribute(y).indexOf(w)};break;case"$":v=function(e){return e.getAttribute(y).lastIndexOf(w)==e.getAttribute(y).length-w.length};break;case"*":v=function(e){return e.getAttribute(y).indexOf(w)>-1};break;default:v=function(e){return e.getAttribute(y)}}for(h=[],p=0,u=0;u<a.length;u++)v(a[u])&&(h[p++]=a[u])}else{for(o=n,a=[],s=0,u=0;u<h.length;u++)for(d=h[u].getElementsByTagName(o),l=0;l<d.length;l++)a[s++]=d[l];h=a}}return h}return function(e){return q.isElement(e)?[e]:q.isObject(e)&&!q.isUndefined(e.length)?e:n.call(this,e)}}(),q.info={referringDomain:function(e){if(e&&e.split){var t=e.split("/");if(t.length>=3)return t[2]}return""},properties:function(){var e={"5.0":"Win2000",5.1:"WinXP",5.2:"Win2003","6.0":"WindowsVista",6.1:"Win7",6.2:"Win8",6.3:"Win8.1","10.0":"Win10"},t=y.devicePlatform()||"web",r=y.deviceModel(),n=y.windows(),i=k.os.name+" "+k.os.fullVersion;return n&&e[k.os.fullVersion]&&(i=e[k.os.fullVersion]),q.extend(q.strip_empty_properties({deviceModel:r,deviceOs:k.os.name,deviceOsVersion:i,browser:k.browser.name,referrer:decodeURIComponent(C.referrer),referring_domain:q.info.referringDomain(C.referrer),devicePlatform:t,currentDomain:q.info.referringDomain(window.location.href)}),{current_url:decodeURIComponent(window.location.href),title:C.title||"",url_path:window.location.pathname||"",browser_version:k.browser.fullVersion,screen_height:screen.height,screen_width:screen.width,hb_lib:t,lib_version:h.LIB_VERSION})}},q.size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},q.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},q.get_host=function(e){var t="";null==e&&(e=window.location.href);var r=e.match(/.*\:\/\/([^\/]*).*/);return null!=r&&(t=r[1]),t},q.get_second_domain=function(e){var t="";try{if(e){var r=e.split(".");t=2===r.length?"."+e:3===r.length?"."+r[1]+"."+r[2]:e.substring(e.indexOf("."))}}catch(r){t=e}return t},q.sessionStorage={isSupport:function(){var e=!0,t="__hubbledatasupport__",r="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,r),sessionStorage.removeItem(t,r),e=!0):e=!1}catch(t){e=!1}return e}},q.loadScript=function(e){e=q.extend({success:function(){},error:function(){},appendCall:function(e){C.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=C.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=C.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)},q.ry=function(e){return new q.ry.init(e)},q.ry.init=function(e){this.ele=e},q.ry.init.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&q.isUndefined(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=C.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),q.ry(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var r=null;if("function"==typeof window.getMatchedCSSRules&&(r=getMatchedCSSRules(this.ele)),!r||!q.isArray(r))return null;for(var n=r.length-1;n>=0;n--){if(t=r[n].style.getPropertyValue(e))return t}},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(e){return this.sibling(this.ele,"previousSibling")},siblings:function(e){return this.siblings((this.ele.parentNode||{}).firstChild,this.ele)},children:function(e){return this.siblings(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return e=e&&11!==e.nodeType?e:null,q.ry(e)}},q.addEvent=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation,t._getPath=e._getPath),t}e._getPath=function(){var e=this;return this.path||this.composedPath&&this.composedPath()||function(){try{var t=e.target,r=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,r.unshift(t);return r}catch(e){return[]}}()},e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0};(function(t,r,n){if(t&&t.addEventListener)t.addEventListener(r,(function(t){t._getPath=e._getPath,n.call(this,t)}),!1);else{var i="on"+r,o=t[i];t[i]=function(t,r,n){var i=function(i){if(i=i||e(window.event)){i.target=i.srcElement;var o,a,s=!0;return"function"==typeof n&&(o=n(i)),a=r.call(t,i),!1!==o&&!1!==a||(s=!1),s}};return i}(t,n,o)}}).apply(null,arguments)},q.getEleInfo=function(e,t,r){if(!e.target||!t)return!1;var n=e.target,i=n.tagName.toLowerCase(),o={};o.type=i;var a="";return n.textContent?a=q.trim(n.textContent):n.innerText&&(a=q.trim(n.innerText)),a&&(a=a.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),o.text=a||"","input"===i&&("button"===n.type||"submit"===n.type||t&&"function"==typeof t.collect_input&&t.collect_input(n,r))&&(o.text=n.value||""),o=q.strip_empty_properties(o)},q.ajax={post:function(e,t,r,n){var i=this;i.callback=r||function(e){};try{var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json"),o.withCredentials=!0,o.ontimeout=function(){i.callback({status:0,error:!0,message:"request "+e+" time out"})},o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)i.callback(q.JSONDecode(o.responseText));else{var e="Bad HTTP status: "+o.status+" "+o.statusText;i.callback({status:0,error:!0,message:e})}},o.timeout=n||5e3,o.send(q.JSONEncode(t))}catch(e){}},get:function(e,t){try{var r=new XMLHttpRequest;r.open("GET",e,!0),r.withCredentials=!0,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)t&&t(q.JSONDecode(r.responseText));else if(t){var e="Bad HTTP status: "+r.status+" "+r.statusText;t({status:0,error:!0,message:e})}},r.send(null)}catch(e){}}},q.innerEvent={on:function(e,t){this._list||(this._list={}),this._list[e]||(this._list[e]=[]),this._list[e].push(t)},off:function(e){this._list||(this._list={}),this._list[e]&&delete this._list[e]},trigger:function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=this._list&&this._list[t];if(r&&0!==r.length)for(var n=0;n<r.length;n++)"function"==typeof r[n]&&r[n].apply(this,e)}},q.toArray=q.toArray,q.isObject=q.isObject,q.JSONEncode=q.JSONEncode,q.JSONDecode=q.JSONDecode,q.isBlockedUA=q.isBlockedUA,q.isEmptyObject=q.isEmptyObject,q.info=q.info,q.info.properties=q.info.properties,q.sessionStorage=q.sessionStorage,q.sessionStorage.isSupport=q.sessionStorage.isSupport,q.loadScript=q.loadScript,q.ry=q.ry,q.addEvent=q.addEvent,q.getEleInfo=q.getEleInfo,q.ajax=q.ajax;var be={data:{campaign:{utm_source:"",utm_medium:"",utm_campaign:"",utm_content:"",utm_term:"",promotional_id:""},isCampaign:!1,isAdClick:!1,campaignParamsSaved:!1,APPKEY:""},init:function(e,t){void 0!==e&&(this.data.APPKEY=e,this.DATracker=t,this.checkCampaign(),this.checkAdClick(),this.setParams(),this.data.isCampaign&&this.save())},campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term promotional_id".split(" "),t="",r={};return q.each(e,(function(e){(t=q.getQueryParam(document.URL,e)).length&&(r[e]=t)})),r},setParams:function(){var e={};if(this.data.isCampaign)e=this.campaignParams();else{var t=q.cookie.get("hb_"+this.data.APPKEY+"_u");t&&(e=q.JSONDecode(t))}this.data.campaign=q.extend(this.data.campaign,e)},getParams:function(){return this.setParams(),this.changeParams()},checkCampaign:function(){var e=this.campaignParams();void 0!==e.utm_source&&void 0!==e.utm_campaign&&(this.data.isCampaign=!0)},checkAdClick:function(){var e=q.getQueryParam(document.URL,"t_rs");this.data.isCampaign&&document.referrer&&!e&&(this.data.isAdClick=!0)},save:function(){var e=this.DATracker.get_config("campaigin");e||(e={useHour:!1,day:30,hour:720}),this.data.campaignParamsSaved||(e.useHour?q.cookie.setUseHour("hb_"+this.data.APPKEY+"_u",q.JSONEncode(this.data.campaign),e.hour,this.DATracker.get_config("cross_subdomain_cookie")):q.cookie.set("hb_"+this.data.APPKEY+"_u",q.JSONEncode(this.data.campaign),e.day,this.DATracker.get_config("cross_subdomain_cookie")),this.data.campaignParamsSaved=!0)},changeParams:function(){var e=this.data.campaign,t={utmSource:e.utm_source,utmMedium:e.utm_medium,promotionalID:e.promotional_id,utmCampaign:e.utm_campaign,utmContent:e.utm_content,utmTerm:e.utm_term};return t.utmSource||delete t.utmSource,t.utmMedium||delete t.utmMedium,t.promotionalID||delete t.promotionalID,t.utmCampaign||delete t.utmCampaign,t.utmContent||delete t.utmContent,t.utmTerm||delete t.utmTerm,t}};function me(e,t,r){if(e[t]){var n=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);r.apply(this,e),n.apply(this,e)}}else e[t]=function(){var e=Array.prototype.slice.call(arguments);r.apply(this,e)}}function ve(){return location.pathname+location.search}var ye={config:{mode:"hash",track_replace_state:!1,callback_fn:function(){}},init:function(e){this.config=q.extend(this.config,e||{}),this.path=ve(),this.event()},event:function(){if("history"===this.config.mode){if(!history.pushState||!window.addEventListener)return;me(history,"pushState",q.bind(this.pushStateOverride,this)),me(history,"replaceState",q.bind(this.replaceStateOverride,this)),window.addEventListener("popstate",q.bind(this.handlePopState,this))}else"hash"===this.config.mode&&q.register_hash_event(q.bind(this.handleHashState,this))},pushStateOverride:function(){this.handleUrlChange(!0)},replaceStateOverride:function(){this.handleUrlChange(!1)},handlePopState:function(){this.handleUrlChange(!0)},handleHashState:function(){this.handleUrlChange(!0)},handleUrlChange:function(e){var t=this;setTimeout((function(){if("hash"===t.config.mode)"function"==typeof t.config.callback_fn&&t.config.callback_fn.call();else if("history"===t.config.mode){var r=t.path,n=ve();r!=n&&t.shouldTrackUrlChange(n,r)&&(t.path=n,(e||t.config.track_replace_state)&&"function"==typeof t.config.callback_fn&&t.config.callback_fn.call())}}),0)},shouldTrackUrlChange:function(e,t){return!(!e||!t)}},ke={data:{secondLevelSource:"",outsideReferer:!1,APPKEY:""},init:function(e){void 0!==e&&(this.data.APPKEY=e,this.checkReferer(),this.setParams(),this.save())},checkReferer:function(){document.referrer&&q.get_host(document.referrer)!=window.location.host&&(this.data.outsideReferer=!0)},setParams:function(){var e=q.cookie.get("hb_"+this.data.APPKEY+"_source");e||(e=""),this.data.outsideReferer&&(e=q.get_host(document.referrer)),this.data.secondLevelSource=e},save:function(){this.data.outsideReferer&&q.cookie.set("hb_"+this.data.APPKEY+"_source",this.data.secondLevelSource,30,!0)},getParams:function(){return{secondLevelSource:this.data.secondLevelSource}}},we={data:{nowDate:0,pagetime:0,duration:[],suspendid:null},config:{enable_pagetime:!1,single_page:!0,intersectionRoot:null,root:null,el_threshold_steps:10,el_threshold:.1,polling_ms:3e3,el_duration_querySelector:[],el_divid_mark:"data-hubble-el-divid",el_divid_mark_inner:"data-hubble-el-divid_inner",el_repeat_listenering:!1,request_animation_frame:!0,callback:function(){}},settimeoutPagetimeNum:null,mutationObserver:null,intersectionObserver:null,init:function(e){if(!e)return null;this.DATracker=e;var t=this;if(!t.DATracker.get_config("hubble_render_mode")){var r=t.DATracker.get_config("pagetime")||{};t.setConfig(r,performance&&performance.timing&&performance.timing.navigationStart),q.innerEvent.on("singlePage:change",(function(){if(t.config.single_page)try{var e=t.DATracker.get_config("pagetime")||{};t.setConfig(e)}catch(e){B(e)}}))}},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.config.request_animation_frame?cancelAnimationFrame(this.settimeoutPagetimeNum):clearTimeout(this.settimeoutPagetimeNum)})),stayTime:function(){var e=this;if(e.clearTimeout(),e.config.enable_pagetime&&!e.DATracker.get_config("hubble_render_mode"))if(e.config.request_animation_frame){e.customizeSetInterval((function(){e.data.pagetime=(new Date).getTime()-e.data.nowDate,e.send()}),e.config.polling_ms)}else{!function t(){e.settimeoutPagetimeNum=setTimeout((function(){e.data.pagetime=(new Date).getTime()-e.data.nowDate,e.send(),t()}),e.config.polling_ms)}()}},customizeSetInterval:function(e,t){var r=this;if(requestAnimationFrame){var n=Date.now();!function i(){var o=Date.now();o-n>=t&&(n=o=Date.now(),e()),r.config.request_animation_frame&&(r.settimeoutPagetimeNum=requestAnimationFrame(i))}()}else B("定时上报数据：浏览器需支持 requestAnimationFrame  方法！")},send:function(){try{var e=this;if(e.DATracker.get_config("hubble_render_mode"))return;var t=q.info.properties().current_url;if(t){var r=q.sha1(t),n={duration:[],pagetime:this.data.pagetime,suspendid:this.data.suspendid},i=(new Date).getTime();q.each(this.data.duration,(function(t){var r=t.divtime;t.leave||(r+=i-t.startTime,t.startTime=i,t.divtime=r);var o=t.divid;"querySelector"===t.findType?o+=","+t.divid:"dataAttribute"===t.findType&&(o+=",["+e.config.el_divid_mark+"="+t.divid+"]"),n.duration.push({divid:o,divtime:r})})),n.duration=JSON.stringify(n.duration),this.DATracker.track(r,n,this.config.callback,"auto","post")}}catch(e){B(e)}},buildThresholdList:function(){for(var e=[],t=this.config.el_threshold_steps,r=1;r<=t;r++){var n=r/t;e.push(n)}return e.push(0),e},monitor:function(){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(e)if(IntersectionObserver){var t=this;try{t.mutationObserver&&t.mutationObserver.disconnect(),t.intersectionObserver&&t.intersectionObserver.disconnect()}catch(e){B(e)}if(t.config.enable_pagetime&&!t.DATracker.get_config("hubble_render_mode"))try{var r={root:t.config.intersectionRoot,threshold:t.buildThresholdList()};t.intersectionObserver=new IntersectionObserver((function(e){t.intersectionObserverFn(e)}),r);t.observer=new e((function(){t.elDividMark(),t.mutantionFn()}));var n=t.config.root||document.body;t.observer.observe(n,{attributes:!1,childList:!0,subtree:!0})}catch(e){B(e)}}else B("监听元素停留时长：浏览器需支持 IntersectionObserver 方法！");else B("监听元素停留时长：浏览器需支持 MutationObserver 方法！")},elDividMark:function(){var e=this,t=document.querySelectorAll("["+e.config.el_divid_mark+"]"),r=[];q.each(t,(function(t){try{var n=t.getAttribute(e.config.el_divid_mark);if(n)e.data.duration.find((function(e){return e.divid===n}))||r.push(n)}catch(e){B(e)}})),e.addElements(r,"dataAttribute")},intersectionObserverFn:function(e){try{var t=this,r=(new Date).getTime();q.each(e,(function(n,i){try{var o=n.target;if(o){var a=o.getAttribute(t.config.el_divid_mark_inner);q.each(t.data.duration,(function(n){n.divid===a&&(e[i].intersectionRatio<=t.config.el_threshold?(n.startTime>0&&(n.divtime+=r-n.startTime),n.startTime=0,n.leave=!0,R(a,"离开了")):(R(a,"进来了"),n.leave=!1,n.startTime>0&&(n.divtime+=r-n.startTime),n.startTime=r))}))}}catch(e){R(e)}}))}catch(e){R(e)}},mutantionFn:function(){var e=this;e.intersectionObserver?q.each(e.data.duration,(function(t){try{if(t.divid){var r=null;"querySelector"===t.findType?r=document.querySelector(t.divid):"dataAttribute"===t.findType&&(r=document.querySelector("["+e.config.el_divid_mark+"="+t.divid+"]")),r&&e.config.el_divid_mark_inner&&(r.getAttribute(e.config.el_divid_mark_inner)||r.setAttribute(e.config.el_divid_mark_inner,t.divid),t.startObserve||(t.startObserve=!0,e.intersectionObserver.observe(r)))}}catch(e){B(e)}})):B("没有初始化 intersectionObserver 监听器")},setConfig:function(e,t){var r=this;if(!r.DATracker.get_config("hubble_render_mode")){if(r.data.pagetime=0,r.data.nowDate=t||(new Date).getTime(),r.data.duration=[],r.data.suspendid=q.UUID(),r.config=q.deepMerge(r.config,e||{}),!r.config.enable_pagetime)return r.stop(),r;var n=r.config.el_duration_querySelector||[];return r.addElements(n),r.stayTime(),r.monitor(),r.config.el_repeat_listenering&&r.mutantionFn(),r}},stop:function(){var e=this;e.clearTimeout();try{e.mutationObserver&&(e.mutationObserver.disconnect(),e.mutationObserver=null),e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}catch(e){B(e)}},addElements:function(e,t){var r=this;q.each(e,(function(e){r.data.duration.push({divid:e,divtime:0,startTime:0,startObserve:!1,leave:!0,findType:t||"querySelector"})}))}},Te={lastTrackTime:0,getDomIndex:function(e){var t=[].indexOf;if(!e.parentNode)return-1;var r=e.parentNode.children;if(!r)return-1;var n=r.length;if(t)return t.call(r,e);for(var i=0;i<n;++i)if(e==r[i])return i;return-1},selector:function(e){var t=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.id?"#"+e.id:e.tagName.toLowerCase()+(~t?":nth-child("+(t+1)+")":"")},getDomSelector:function(e,t){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var r=e.nodeName.toLowerCase();return e&&"body"!==r&&1==e.nodeType?(t.unshift(this.selector(e)),e.id?t.join(" > "):this.getDomSelector(e.parentNode,t)):(t.unshift("body"),t.join(" > "))},getDomWidth:function(e){return e.scrollWidth},getDomHeight:function(e){return e.scrollHeight},hasParentA:function(e){try{for(;"body"!=e.nodeName.toLowerCase();){if("a"==e.nodeName.toLowerCase())return e;e=e.parentNode}}catch(e){return!1}return!1},getScrollLeft:function(){var e=0;try{e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getScrollTop:function(){var e=0;try{e=document.documentElement.scrollTop||document.body.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBoundingClientRect:function(e){var t=this.getScrollTop(),r=this.getScrollLeft();if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return{left:n.left,right:n.right,top:n.top,bottom:n.bottom}}var i=this.getElementLeft(e),o=this.getElementTop(e);return{left:i-r,right:i+offsetWidth-r,top:o-t,bottom:o+offsetHeight-t}},getElementLeft:function(e){for(var t=e.offsetLeft,r=e.offsetParent;null!==r;)t+=r.offsetLeft,r=r.offsetParent;return t},getElementTop:function(e){for(var t=e.offsetTop,r=e.offsetParent;null!==r;)t+=r.offsetTop,r=r.offsetParent;return t},getMousePosion:function(e){var t=parseInt(+e.clientX+this.getScrollLeft(),10),r=parseInt(+e.clientY+this.getScrollTop(),10);return{left:isNaN(t)?0:t,top:isNaN(r)?0:r}},getDomPosition:function(e){var t=this.getBoundingClientRect(e);return t.top+=this.getScrollTop(),t.left+=this.getScrollLeft(),{top:Math.round(t.top),left:Math.round(t.left)}},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},start:function(e,t,r,n){var i,o=this.DATracker.config.heatmap,a=!1;if(o&&o.collect_element&&!o.collect_element(t,this))return!1;if(o&&o.set_collect_element_path&&q.isFunction(o.set_collect_element_path)&&(a=!0),a){if(!(i=o.set_collect_element_path(t,this)))return B("无元素path"),!1}else i=this.getDomSelector(t);var s,c=q.getEleInfo({target:t},o,this);if(c.path=i||"",o&&o.custom_property){var u=o.custom_property(t);q.isObject(u)&&(c=q.extend(c,u))}if(e){var l=this.getMousePosion(e),d=this.getDomPosition(t);c.stat=c.path+","+(l.left-d.left)+","+(l.top-d.top)+","+this.getDomWidth(t)+","+this.getDomHeight(t)}if(("a"===t.tagName.toLowerCase()||n)&&o&&!0===o.isTrackLink)s=q.sha1(c.path),c.path=r?"":c.path,this.trackLink({event:e,target:t,parentIsA:n},s,c);else if(c.path)try{s=q.sha1(c.path),c.path=r?"":c.path,this.DATracker.track(s,c,void 0,"auto")}catch(e){}},trackLink:function(e,t,n){var i=null,o=this;if((e=e||{}).ele&&(i=e.ele),e.event&&(i=e.target?e.target:e.event.target),n=n||{},!i||"object"!==r(i))return!1;if(e.parentIsA&&(i=e.parentIsA),!i.href||/^javascript/.test(i.href)||"_blank"==i.target||i.download||i.onclick)return o.DATracker.track(t,n,void 0,"auto"),!1;e.event&&function(e){e.stopPropagation(),e.preventDefault();var r=!1;function a(){r||(r=!0,location.href=i.href)}setTimeout(a,1e3),o.DATracker.track(t,n,a,"auto")}(e.event)},hasElement:function(e){var t=e._getPath();if(q.isArray(t)&&t.length>0)for(var r=0;r<t.length;r++)if(t[r]&&t[r].tagName&&"a"===t[r].tagName.toLowerCase())return t[r];return!1},trackHeatmap:function(e){if("object"===r(e)&&e.tagName){var t=e.tagName.toLowerCase(),n=e.parentNode.tagName.toLowerCase();"button"!==t&&"a"!==t&&"a"!==n&&"button"!==n&&"input"!==t&&"textarea"!==t&&this.start(null,e,!0)}},initHeatmap:function(){var e=this,t=e.DATracker.config.heatmap;return!(!q.isObject(t)||"default"!==t.clickmap)&&(!(q.isFunction(t.collect_url)&&!t.collect_url())&&void q.addEvent(document,"click",(function(n){var i=n||window.event;if(!i)return!1;var o=i.target||i.srcElement;if("object"!==r(o))return!1;if("string"!=typeof o.tagName)return!1;var a=o.tagName.toLowerCase();if("body"===a.toLowerCase()||"html"===a.toLowerCase())return!1;if(!o||!o.parentNode||!o.parentNode.children)return!1;var s=o.parentNode,c=e.hasParentA(o);if(c)e.start(i,o,"",c);else if(["button","input","textarea"].indexOf(a)>-1)e.start(i,o,"");else if("button"===s.tagName.toLowerCase()||"a"===s.tagName.toLowerCase())e.start(i,s);else if("area"===a&&"map"===s.tagName.toLowerCase()&&q.ry(s).prev().tagName&&"img"===q.ry(s).prev().tagName.toLowerCase())e.start(i,q.ry(s).prev());else if(t.collect_all){var u=new Date;(u-e.lastTrackTime)/1e3>=.5&&(e.lastTrackTime=u-0,e.start(i,o,o.children.length>0))}})))},prepare:function(e){var t=location.href.match(/hubble_heatmap_id=([^&#]+)/),r=this,n=r.DATracker.config.heatmap_url,i=r.DATracker.config.heatmap;function o(e){n?q.loadScript({success:function(){},error:function(){},type:"js",url:n+"?_="+Math.random()}):B("没有指定heatmap_url的路径")}q.isObject(i)&&i.loadTimeout,t&&t[0]&&t[1]?(r.DATracker.set_config({hubble_render_mode:!0}),q.sessionStorage.isSupport()&&sessionStorage.setItem("hubble_heatmap_id",t[1]),o(t[1])):q.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_heatmap_id")?(r.DATracker.set_config({hubble_render_mode:!0}),o(sessionStorage.getItem("hubble_heatmap_id"))):(e(),r.DATracker.pagetime.init(r.DATracker),q.isObject(i)&&(r.initHeatmap(),r.DATracker.track_heatmap=q.bind(r.trackHeatmap,r)))},init:function(e,t){e&&t&&(this.DATracker=e,this.DATracker.heatmap=this,this.DATracker.track_heatmap=function(){},this.DATracker.pagetime=we,this.prepare(t))}};function Se(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function xe(e,t,r,n,i,o){return Se((a=Se(Se(t,e),Se(n,o)))<<(s=i)|a>>>32-s,r);var a,s}function De(e,t,r,n,i,o,a){return xe(t&r|~t&n,e,t,i,o,a)}function Ae(e,t,r,n,i,o,a){return xe(t&n|r&~n,e,t,i,o,a)}function Oe(e,t,r,n,i,o,a){return xe(t^r^n,e,t,i,o,a)}function Ie(e,t,r,n,i,o,a){return xe(r^(t|~n),e,t,i,o,a)}function Ce(e,t){var r,n,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,u=-1732584194,l=271733878;for(r=0;r<e.length;r+=16)n=s,i=c,o=u,a=l,s=De(s,c,u,l,e[r],7,-680876936),l=De(l,s,c,u,e[r+1],12,-389564586),u=De(u,l,s,c,e[r+2],17,606105819),c=De(c,u,l,s,e[r+3],22,-1044525330),s=De(s,c,u,l,e[r+4],7,-176418897),l=De(l,s,c,u,e[r+5],12,1200080426),u=De(u,l,s,c,e[r+6],17,-1473231341),c=De(c,u,l,s,e[r+7],22,-45705983),s=De(s,c,u,l,e[r+8],7,1770035416),l=De(l,s,c,u,e[r+9],12,-1958414417),u=De(u,l,s,c,e[r+10],17,-42063),c=De(c,u,l,s,e[r+11],22,-1990404162),s=De(s,c,u,l,e[r+12],7,1804603682),l=De(l,s,c,u,e[r+13],12,-40341101),u=De(u,l,s,c,e[r+14],17,-1502002290),s=Ae(s,c=De(c,u,l,s,e[r+15],22,1236535329),u,l,e[r+1],5,-165796510),l=Ae(l,s,c,u,e[r+6],9,-1069501632),u=Ae(u,l,s,c,e[r+11],14,643717713),c=Ae(c,u,l,s,e[r],20,-373897302),s=Ae(s,c,u,l,e[r+5],5,-701558691),l=Ae(l,s,c,u,e[r+10],9,38016083),u=Ae(u,l,s,c,e[r+15],14,-660478335),c=Ae(c,u,l,s,e[r+4],20,-405537848),s=Ae(s,c,u,l,e[r+9],5,568446438),l=Ae(l,s,c,u,e[r+14],9,-1019803690),u=Ae(u,l,s,c,e[r+3],14,-187363961),c=Ae(c,u,l,s,e[r+8],20,1163531501),s=Ae(s,c,u,l,e[r+13],5,-1444681467),l=Ae(l,s,c,u,e[r+2],9,-51403784),u=Ae(u,l,s,c,e[r+7],14,1735328473),s=Oe(s,c=Ae(c,u,l,s,e[r+12],20,-1926607734),u,l,e[r+5],4,-378558),l=Oe(l,s,c,u,e[r+8],11,-2022574463),u=Oe(u,l,s,c,e[r+11],16,1839030562),c=Oe(c,u,l,s,e[r+14],23,-35309556),s=Oe(s,c,u,l,e[r+1],4,-1530992060),l=Oe(l,s,c,u,e[r+4],11,1272893353),u=Oe(u,l,s,c,e[r+7],16,-155497632),c=Oe(c,u,l,s,e[r+10],23,-1094730640),s=Oe(s,c,u,l,e[r+13],4,681279174),l=Oe(l,s,c,u,e[r],11,-358537222),u=Oe(u,l,s,c,e[r+3],16,-722521979),c=Oe(c,u,l,s,e[r+6],23,76029189),s=Oe(s,c,u,l,e[r+9],4,-640364487),l=Oe(l,s,c,u,e[r+12],11,-421815835),u=Oe(u,l,s,c,e[r+15],16,530742520),s=Ie(s,c=Oe(c,u,l,s,e[r+2],23,-995338651),u,l,e[r],6,-198630844),l=Ie(l,s,c,u,e[r+7],10,1126891415),u=Ie(u,l,s,c,e[r+14],15,-1416354905),c=Ie(c,u,l,s,e[r+5],21,-57434055),s=Ie(s,c,u,l,e[r+12],6,1700485571),l=Ie(l,s,c,u,e[r+3],10,-1894986606),u=Ie(u,l,s,c,e[r+10],15,-1051523),c=Ie(c,u,l,s,e[r+1],21,-2054922799),s=Ie(s,c,u,l,e[r+8],6,1873313359),l=Ie(l,s,c,u,e[r+15],10,-30611744),u=Ie(u,l,s,c,e[r+6],15,-1560198380),c=Ie(c,u,l,s,e[r+13],21,1309151649),s=Ie(s,c,u,l,e[r+4],6,-145523070),l=Ie(l,s,c,u,e[r+11],10,-1120210379),u=Ie(u,l,s,c,e[r+2],15,718787259),c=Ie(c,u,l,s,e[r+9],21,-343485551),s=Se(s,n),c=Se(c,i),u=Se(u,o),l=Se(l,a);return[s,c,u,l]}function Ne(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function Pe(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function Ee(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function Ue(e){return unescape(encodeURIComponent(e))}function je(e){return function(e){return Ne(Ce(Pe(e),8*e.length))}(Ue(e))}function Le(e,t){return function(e,t){var r,n,i=Pe(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=Ce(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=Ce(o.concat(Pe(t)),512+8*t.length),Ne(Ce(a.concat(n),640))}(Ue(e),Ue(t))}function qe(e,t,r){return t?r?Le(t,e):Ee(Le(t,e)):r?je(e):Ee(je(e))}var Re=function(e){return e=e.substring(8,24)},Be={_queue:[],_callbackList:[],_loadControlComplete:!1,init:function(e){if(e){var t=this;t.DATracker=e;var r=t.DATracker.get_config("abtest")||{};t._control=null,t._isTestDebug()&&(r.interval_mins_abtest=0,t.DATracker.set_config({abtest:r}),t._loadControlJs(),r.enable_abtest?t._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&(t._control=new hubbleData_render_mode_fn(t.DATracker,{type:"abtest_debug",data:{hubble_abtest_debug_key:t.getDebugKeyData()}}).control,q.each(t._queue,(function(e){t.debugTrack(e)})),t._queue=[])})):t._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&new hubbleData_render_mode_fn(t.DATracker,{type:"abtest_debug_but_abtest_disable"})})))}},_isTestDebug:function(){var e=location.href.match(/hubble_abtest_debug_key=([^&#]+)/),t=!1;return e&&e[0]&&e[1]?(t=!0,q.sessionStorage.isSupport()&&sessionStorage.setItem("hubble_abtest_debug_key",e[1])):q.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_abtest_debug_key")&&sessionStorage.getItem("hubble_abtest_debug_key")&&(t=!0),t},_loadControlJs:function(){var e=this,t=e.DATracker.config.control_js_url;t?q.loadScript({success:function(){e._loadControlComplete=!0,q.each(e._callbackList,(function(t){t.call(e)})),e._callbackList=[]},error:function(){},type:"js",url:t+"?_="+Math.random()}):B("没有指定control_js_url的路径")},_prepare:function(e){this._loadControlComplete||e&&this._callbackList.push(e),e&&e.call(this)},getDebugKeyData:function(){var e=location.href.match(/hubble_abtest_debug_key=([^&#]+)/),t="";return e&&e[0]&&e[1]?t=e[1]:q.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_abtest_debug_key")&&(t=sessionStorage.getItem("hubble_abtest_debug_key")),t},debugTrack:function(e){try{this._control?this._control.addEvent(e):this._queue.push(e)}catch(e){B(e)}},debugNoData:function(){var e=this;e._isTestDebug()&&e._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&new hubbleData_render_mode_fn(e.DATracker,{type:"abtest_debug_abtest_no_data"})}))}},ze={multilinkArr:[],isTestDebug:Be._isTestDebug,setMultilinkArr:function(e){this.multilinkArr=e||[]},jump:function(e,t){e=e||this.getVariable();var r=this.getNowUrl(),n=!0,i=this.getNowProtocolDommainAndPath();e?(1==e.type&&(i!==e.url&&i+"/"!==e.url||(n=!1)),e.url!==r&&e.url!==r+"/"&&n?(this.isTestDebug()&&(e.url+=e.url.indexOf("?")>-1?"&":"?",e.url=e.url+"hubble_abtest_debug_key="+Be.getDebugKeyData()),window.location.href=e.url):t&&t()):t&&t()},getNowUrl:function(){var e,t=window.location.href;return this.isTestDebug()&&(t.indexOf("?hubble_abtest_debug_key=")>-1?e=t.match(/\?hubble_abtest_debug_key=([^&#]+)/):t.indexOf("&hubble_abtest_debug_key=")>-1&&(e=t.match(/\&hubble_abtest_debug_key=([^&#]+)/)),e&&e[0]&&(t=t.replace(e[0],""))),t},getNowProtocolDommainAndPath:function(){return("https:"==document.location.protocol?"https://":"http://")+q.info.referringDomain(window.location.href)+window.location.pathname},getVariable:function(){for(var e=this.getNowProtocolDommainAndPath(),t=this.getNowUrl(),r=Re(qe(e)),n=Re(qe(e+"/")),i=Re(qe(t)),o=Re(qe(t+"/")),a=[],s=[],c=0;c<this.multilinkArr.length;c++){var u=this.multilinkArr[c][0].replace(new RegExp("^\\$","g"),"");t!==e&&(u===i||u===o)?a.push({variable:this.multilinkArr[c][0],url:this.multilinkArr[c][1],type:0,key:u===i?t:t+"/"}):u!==r&&u!==n||s.push({variable:this.multilinkArr[c][0],url:this.multilinkArr[c][1],type:1,key:u===r?e:e+"/"})}return a.length?a[0]:s.length?s[0]:null}},Me={_visualizationArr:[],_settimeNum:0,_loadControlJs:function(e){var t=this.DATracker.config.control_js_url;t?q.loadScript({success:function(){"function"==typeof e&&e()},error:function(){},type:"js",url:t+"?_="+Math.random()}):B("没有指定control_js_url的路径")},isEditor:function(){var e=location.href.match(/hubble_abtest_editor_key=([^&#]+)/),t=!1;return e&&e[0]&&e[1]&&(t=!0),t},_querySelector:function(e,t){try{return(t||document).querySelector(e)}catch(e){return null}},_getNowUrl:function(){var e,t=window.location.href;return this.isTestDebug()&&(t.indexOf("?hubble_abtest_debug_key=")>-1?e=t.match(/\?hubble_abtest_debug_key=([^&#]+)/):t.indexOf("&hubble_abtest_debug_key=")>-1&&(e=t.match(/\&hubble_abtest_debug_key=([^&#]+)/)),e&&e[0]&&(t=t.replace(e[0],""))),t},_setType:function(){R(this._visualizationArr);try{for(var e=0;e<this._visualizationArr.length;e+=1)if(this._visualizationArr[e][1])if(this._visualizationArr[e][1]=q.JSONDecode(this._visualizationArr[e][1]),this._visualizationArr[e][1].pattern){try{this._visualizationArr[e][1].pattern=q.JSONDecode(this._visualizationArr[e][1].pattern)}catch(e){B(e)}this._visualizationArr[e][2]=0}else this._visualizationArr[e][2]=1;else this._visualizationArr[e][2]=1}catch(e){B(e)}},_filtrateElementItem:function(e,t){var r=!0;return e.nodeName!==t.nodeName.toLocaleUpperCase()&&(r=!1),r},_resetConfig:function(e){var t=[];return q.each(e,(function(e,r){var n=e.variations;q.each(n,(function(e,r){t.push(e)}))})),t},init:function(e,t){if(e){var r=this;if(r.DATracker=e,r.ABTEST=t,this.isEditor()){var n=r.DATracker.get_config("abtest")||{};r._loadControlJs((function(){if("function"==typeof hubbleData_render_mode_fn){n.enable_abtest?new hubbleData_render_mode_fn(r.DATracker,{type:"abtest_editor"}):new hubbleData_render_mode_fn(r.DATracker,{type:"abtest_editor_but_abtest_disable"});try{r.ABTEST._showPage()}catch(e){}}}))}}},isTestDebug:Be._isTestDebug,setVisualizationArr:function(e){this._visualizationArr=e||[],this._setType()},_hidePathStyleSet:function(e){var t="";q.each(e,(function(e){t+=e.selector+"{opacity:0 !important;}"}));var r=document.getElementById("_hb_abtesting_path_hides");if(r)r.styleSheet?r.styleSheet.cssText=t:(r.innerText="",r.appendChild(document.createTextNode(t)));else{var n=document.createElement("style"),i=document.getElementsByTagName("head")[0];n.setAttribute("id","_hb_abtesting_path_hides"),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:(n.innerText="",n.appendChild(document.createTextNode(t))),i.appendChild(n)}},render:function(e){if(e){var t=this;clearTimeout(t._settimeNum);var r=this._resetConfig(e),n=[],i=function(e,t){q.each(t.css,(function(t,r){e.style[r]=t})),q.each(t.attributes,(function(t,r){e.setAttribute(r,t)})),q.each(t,(function(t,r){q.include(["css","attributes","nodeName","selector"],r)||(e[r]=t)}))};try{for(var o=0;o<r.length;o+=1)if(r[o].selector){var a=this._querySelector(r[o].selector),s=r[o];a?this._filtrateElementItem(s,a)&&i(a,s):n.push(r[o])}}catch(e){B(e)}!function e(){var r=0,o=[];t._hidePathStyleSet(n);for(var a=0;a<n.length;a+=1){if(n[a].selector){var s=t._querySelector(n[a].selector),c=n[a];s?t._filtrateElementItem(c,s)&&i(s,c):o.push(n[a])}r++}n=o,r>0?t._settimeNum=setTimeout((function(){e()}),0):clearTimeout(t._settimeNum),t._hidePathStyleSet(n)}()}},getVariables:function(){for(var e=this,t=[],r=function(t){var r=!1;if(!t)return r;var n=e._getNowUrl(),i=Re(qe(n+"/")),o=Re(qe(n)),a=t[0].replace(new RegExp("^\\%","g"),"");return a!==o&&a!==i||(r=!0),r},n=function(t){var r=!1;if(!t)return r;var n=t[1].pattern;if(n){var i=n.conditions;if("OR"===n.relation||""===n.relation)for(var o=0;o<i.length;o+=1){var a=i[o]||{},s=a.field,c=a.func,u=a.params,l=e._getNowUrl();if("URL"===s){if("EQUAL"===c&&(q.include(u,l)||q.include(u,l+"/"))){r=!0;break}if("CONTAIN"===c&&(l.indexOf(u[0])>-1||(l+"/").indexOf(u[0])>-1)){r=!0;break}if("REG_MATCH"===c)try{var d=(0,eval)(u[0]);if(d.test(l)||d.test(l+"/")){r=!0;break}}catch(e){B(e)}}}}return r},i=0;i<e._visualizationArr.length;i+=1){var o=e._visualizationArr[i][2],a=!1;1===o?a=r(e._visualizationArr[i]):0===o&&(a=n(e._visualizationArr[i])),a&&t.push({variations:e._visualizationArr[i][1].variations||[],type:2,variable:e._visualizationArr[i][0]})}return t}},$e={data:{experiments:[],variables:{}},abtest_config:{enable_abtest:!1,interval_mins_abtest:0,default_variables:{},url:"",multilinkTimeOutMs:300,timeoutMs:500,hasCacheRender:!1},_default_variables:{},_getVariableInfoComplete:!1,_queue:[],_showPage:function(){"undefined"!=typeof DATrackerABTestingLeadCode&&DATrackerABTestingLeadCode&&DATrackerABTestingLeadCode.showPage&&DATrackerABTestingLeadCode.showPage()},init:function(e){if(!e)return null;this.DATracker=e,Be.init(this.DATracker),Me.init(this.DATracker,this),this.localStorageName="hb_"+this.DATracker.get_config("token")+"_abtest";var t=Me.isEditor(),r=this,n=function(){try{var e=r.DATracker.get_config("abtest")||{};if(r._default_variables=e.default_variables||{},r.abtest_config=q.deepMerge(r.abtest_config,e),r.abtest_config.enable_abtest)if(r.data.variables=r.abtest_config.default_variables,t)r._getVariableInfoComplete=!0;else if(r._checkUpdateTime())r.async_get_variable();else{var n=r._getLocalStorageData();r.data=n.data,r._getVariableInfoComplete=!0,r._dataClass()}}catch(e){t?(r._getVariableInfoComplete=!0,r._showPage()):r.async_get_variable()}};n(),q.innerEvent.on("singlePage:change",(function(){n()})),r.abtest_config.enable_abtest&&(r.isTestDebug()||q.innerEvent.on("userId:change",(function(e,t){if("login"===t.type){var n=!0;t.userId!==r._getUserId()&&(r._clearLocalData(),r.data.variables=r.abtest_config.default_variables,n=!1),r.async_get_variable(t.userId,n)}else"logout"===t.type&&(r._clearLocalData(),r.data.variables=r.abtest_config.default_variables,r.async_get_variable(t.userId))})))},debugTrack:function(e){Be.debugTrack(e)},_dataClass:function(){if(!this._getVariableInfoComplete)return!1;var e=this,t=e.data.variables,r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(3===e._getExperimentType(i)&&r.push([i,t[i]]),2===e._getExperimentType(i)&&n.push([i,t[i]]));ze.setMultilinkArr(r),Me.setVisualizationArr(n);var o=ze.getVariable(),a=Me.getVariables();if(o){e.get_variation((function(t){try{var r=function(){ze.jump(o,e._showPage)};setTimeout(r,t.abtest_config.multilinkTimeOutMs),t.get(o.variable,window.location.href,r,{variableObj:o})}catch(t){e._showPage(),B(t)}}))}else{if(a.length){e.get_variation((function(e){try{Me.render(a);for(var t=0;t<a.length;t+=1){var r=a[t];e.get(r.variable,{},(function(){}),{variableObj:r})}}catch(e){B(e)}}))}e._showPage()}},isTestDebug:function(){return Be._isTestDebug()},isEditor:function(){return Me.isEditor()},getDebugKeyData:function(){return Be.getDebugKeyData()},_saveLocal:function(){var e={data:this.data};try{q.localStorage.set(this.localStorageName,JSON.stringify(e))}catch(e){}},_clearLocalData:function(){this.data={experiments:[],variables:{},updatedTime:0},this._saveLocal()},_getLocalStorageData:function(){var e;try{e=JSON.parse(q.localStorage.get(this.localStorageName))}catch(t){e=null}return e},_checkUpdateTime:function(){var e=!0;try{var t=this.abtest_config.interval_mins_abtest,r=this._getLocalStorageData().data.updatedTime/1e3;1*(new Date).getTime()/1e3<=r+60*t&&(e=!1)}catch(t){e=!0}return e},_getExperimentType:function(e){var t=1;try{0===e.indexOf("$")&&(t=3),0===e.indexOf("%")&&(t=2)}catch(e){B(e)}return t},_variableToFindExperiment:function(e){for(var t,r={$experimentId:[],$versionId:[],$experimentType:this._getExperimentType(e)},n=0;n<this.data.experiments.length;n++){var i=this.data.experiments[n].experimentId,o=this.data.experiments[n].versionId,a=this.data.experiments[n].variables;q.include(a,e)&&(q.include(r.$experimentId,i)||r.$experimentId.push(i),q.include(r.$versionId,o)||r.$versionId.push(o))}return r.$experimentId=r.$experimentId.join(","),r.$versionId=r.$versionId.join(","),3===r.$experimentType?(t=ze.getVariable())&&(r.$source=t.key,r.$target=t.url):2===r.$experimentType||(r[e]=this.data.variables[e]),r},_track_abtest:function(e,t){e&&this.DATracker.track("da_abtest",e,t||function(){})},_getUserId:function(){var e=this.DATracker.get_user_id()||this.DATracker.get_distinct_id();return this.isTestDebug()&&(e=this.getDebugKeyData()),e},get:function(e,t,r,n){try{if(void 0!==this.data.variables[e]){var i=this._variableToFindExperiment(e)||{};return i.$experimentId&&i.$versionId&&i.$experimentType?this._track_abtest(i,r):"function"==typeof r&&r(),this.data.variables[e]}return t}catch(e){return t}},get_variation:function(e){if(!this._getVariableInfoComplete)return this._queue.push(arguments),!1;"function"==typeof e&&e(this)},async_get_variable:function(e,t){if(this.isEditor())this._getVariableInfoComplete=!0;else try{var r=this.abtest_config;if(r.enable_abtest){var n=this,i=e||n._getUserId(),o=n.DATracker.get_config("token");n._getVariableInfoComplete=!1;var a=n.DATracker.get_config("api_host")+"/cc/a_exp",s=500;try{s=n.abtest_config.timeoutMs}catch(e){s=500}r.url&&(a=r.url);var c=q.extend({},q.info.properties(),n.DATracker.persistence.properties());q.ajax.post(a,{userId:i,appKey:o,property:{deviceOs:c.deviceOs,deviceOsVersion:c.deviceOsVersion,screenWidth:c.screen_width,screenHeight:c.screen_height,devicePlatform:c.hb_lib,pageOpenScene:n.DATracker.pageOpenScene}},q.bind((function(e){if(this._getVariableInfoComplete=!0,e.error)this.isTestDebug()?Be.debugNoData():(t||(this._clearLocalData(),this.data.variables=this.abtest_config.default_variables),this._dataClass());else if(200===e.code){var r=q.JSONDecode(q.JSONEncode(this._default_variables));this.data.experiments=e.data.experiments,this.data.variables=q.deepMerge(r,e.data.variables),this.data.updatedTime=(new Date).getTime(),this._saveLocal(),this._dataClass(),this.isTestDebug()&&(e.data.experiments.length||Be.debugNoData())}else t||(this._clearLocalData(),this.data.variables=this.abtest_config.default_variables),this._dataClass();this._queue.length&&(q.each(n._queue,(function(e){n.get_variation.apply(n,Array.prototype.slice.call(e))})),n._queue=[])}),n),s)}}catch(e){}},is_abtest_debug:Be._isTestDebug,get_hubble_abtest_debug_key_str:function(){var e="";return Be._isTestDebug()&&(e="hubble_abtest_debug_key="+Be.getDebugKeyData()),e},hasLocalCache:function(){return!this._checkUpdateTime()}},Ve={config:{sourceUrl:"https://www.163.com/"},getCookie:function(){var e=q.cookie.get("NTES_P_UTID"),t=q.cookie.get("_ntes_nnid"),r=q.cookie.get("_ntes_nuid"),n=q.cookie.get("P_INFO"),i={};try{t&&(i.$_ntes_nnid_id=t.split(",")[0],i.$_ntes_nnid_time=t.split(",")[1],i.$_ntes_domain="163.com"),r&&(i.$_ntes_nuid=r),n&&(i.$P_INFO_userid=n.split("|")[0],i.$P_INFO_time=n.split("|")[1]),e&&(i.NTES_P_UTID=e)}catch(e){console.log(e)}return i}};function He(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];null===e[i]&&void 0===e[i]||(t[i]=e[i])}return t}function Je(e){var t={status:e.status,statusText:e.statusText,responseText:e.responseText,responseType:e.responseType,responseURL:e.responseURL,readyState:e.readyState};return JSON.stringify(t)}var Fe=function(){function e(){n(this,e)}return o(e,[{key:"post",value:function(e,t){var r=this._getReqConfig("POST");t=He(t);var n=Object.assign({},r,{body:JSON.stringify(t)});return this._request(e,n)}},{key:"get",value:function(e,t){var r=this._getReqConfig("GET");t=He(t);var n=Object.keys(t),i=[];if(n.length>0){var o,a=c(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;i.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]))}}catch(e){a.e(e)}finally{a.f()}e+="?",e+=i.join("&")}return this._request(e,r)}},{key:"_getReqConfig",value:function(){return{method:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",timeout:6e4,headers:{"Content-Type":"application/json"}}}},{key:"_request",value:function(e,t){e=e.trim();var r=t.method,n=t.headers,i=t.body,o=void 0===i?"":i,a=new XMLHttpRequest;a.withCredentials=!1,a.open(r,e,!0);for(var s=0,c=Object.keys(n);s<c.length;s++){var u=c[s],l=n[u];a.setRequestHeader(u,l)}return a.send(o),new Promise((function(e,t){a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)e(JSON.parse(a.responseText));else{var r=Je(a);t(r)}},a.onerror=function(e){var r=Je(e.currentTarget);t(r)},a.ontimeout=function(){t("timeout error!")}}))}}]),e}(),Ke=new Fe;function We(e){return"__OXPECKER_"+e}var Ge=We("new_user"),Ye=We("expires_timestamp"),Xe=We("token"),Qe=We("user_id"),Ze=We("device_id");function et(){var e=window.localStorage.getItem(Ge),t=window.localStorage.getItem(Ye);return null!==e&&null!==t}function tt(){var e=window.localStorage.getItem(Ge),t=window.localStorage.getItem(Ye);if(null===e||null===t)throw new Error("本地不存在是否为新用户标识！");return e=Boolean(e),t=Number(t),!1!==e&&Date.now()<t}function rt(e,t){window.localStorage.setItem(Ge,e),window.localStorage.setItem(Ye,t)}function nt(e){window.sessionStorage.setItem(Xe,e)}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"string"==typeof e&&e.length>0&&window.localStorage.setItem(Qe,e)}function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"string"==typeof e&&e.length>0&&window.localStorage.setItem(Ze,e)}function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ke.post(e,t)}function st(e,t,r){var n={};return e&&Object.keys(e).length>0&&(n.hubbleParam=e),t&&r&&r instanceof Error?n.error={type:t,name:r.name,message:r.message,stack:r.stack}:t&&"string"==typeof r&&(n.error={message:r}),n}var ct,ut,lt=!1,dt=function(){function e(){n(this,e),this._buffer=[],this._bufferThreshold=100,this._timeoutId=null,this._timeDelay=1e3,this._request=new Fe,this._url="https://oxpecker.lx.netease.com/api/pub/event/tracking",this._beaconUrl="https://oxpecker.lx.netease.com/api/pub/event/send-beacon/tracking",this._isNewUrl="https://oxpecker.lx.netease.com/api/pub/user-active",this._baseUrl="https://oxpecker.lx.netease.com",this._runtimeErrorPath="/api/pub/event/client-error/tracking",this._commonConfig={},this._userId="",this._deviceId="",this._deviceIdSetByUser=!1,this._token="",this._appKey="",this._send2Hubble=!0,this._version="1.0.0",this._baseAttributes={},this._productProfile={},this._init()}return o(e,[{key:"setProductProfile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._productProfile=e}},{key:"setUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseUrl,r=void 0===t?"":t,n=e.beaconUrl,i=void 0===n?"":n,o=e.isNewUrl,a=void 0===o?"":o;r.length>0&&(this._url=r),i.length>0&&(this._beaconUrl=i),a.length>0&&(this._isNewUrl=a)}},{key:"flush",value:function(){this._send()}},{key:"sendByBeacon",value:function(){this._buffer.length>0&&(navigator.sendBeacon(this._beaconUrl,this._mergeFormData()),this._buffer=[])}},{key:"disableHubbleSend",value:function(){return!1===this._send2Hubble}},{key:"updateConfig",value:function(e){Object.assign(this._commonConfig,e)}},{key:"removeConfigByKey",value:function(e){var t=Reflect.deleteProperty(this._commonConfig,e);return t&&this._send(),t}},{key:"setToken",value:function(e){this._token=e,nt(this._token)}},{key:"addBuffer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{this._deviceIdSetByUser||(this._deviceId=e.deviceUdid),this._userId=e.userId}catch(t){var i=st({data:e,url:this._url,version:this._version},"set-deviceId-userId",t);at(this._baseUrl+this._runtimeErrorPath,i)}try{this._setIsNewUser()}catch(t){var o=st({data:e,url:this._url,version:this._version},"set-newUser",t);at(this._baseUrl+this._runtimeErrorPath,o)}try{this._updateBaseAttribute(e)}catch(t){var a=st({data:e,url:this._url,version:this._version},"set-baseAttributes",t);at(this._baseUrl+this._runtimeErrorPath,a)}try{this._buffer.push({data:this._mapData(e),successCb:r,errorCb:n})}catch(t){var s=st({data:e,url:this._url,version:this._version},"add-bufferList",t);at(this._baseUrl+this._runtimeErrorPath,s)}null===this._timeoutId&&(this._timeoutId=window.setTimeout((function(){t._send()}),this._timeDelay)),this._buffer.length>=this._bufferThreshold&&this._send()}},{key:"setAppKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._appKey=e}},{key:"isDebugMode",value:function(){return"string"==typeof this._token&&this._token.length>0}},{key:"setDeviceIdByUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=String(e),this._deviceId=e,ot(this._deviceId),this._deviceIdSetByUser=!0}},{key:"getUserSetDeviceId",value:function(){return this._deviceIdSetByUser?this._deviceId:null}},{key:"getIsNewInfo",value:function(){return et()?tt():null}},{key:"configSDK",value:function(){!1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).send2Hubble&&(this._send2Hubble=!1)}},{key:"configBaseAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._deviceId&&e._deviceId.length>0&&(this.setDeviceIdByUser(e._deviceId),Reflect.deleteProperty(e,"_deviceId")),Object.assign(this._baseAttributes,e)}},{key:"_init",value:function(){this._registerUnload(),this._getToken()}},{key:"_getToken",value:function(){var e=new URLSearchParams(window.location.search).get("oxpecker_js_token");if(null!==e)this._token=e,nt(this._token);else{var t=window.sessionStorage.getItem(Xe);t&&(this._token=t)}}},{key:"_registerUnload",value:function(){var e=this;window.addEventListener("pagehide",(function(){e.sendByBeacon()}))}},{key:"_mergeFormData",value:function(){var e=this._mergeData().param,t=new FormData;return t.append("data",JSON.stringify(e)),t}},{key:"_send",value:function(){var e=this;try{if(this._cancelTaskId(),0===this._buffer.length)return;var t=this._mergeData(),r=t.param,n=t.successCbList,i=t.errorCbList;this._buffer=[],this._request.post(this._url,r).then((function(t){e._callCbList(n,t)})).catch((function(t){e._callCbList(i,t);var n=st({url:e._url,data:r,version:e._version},"fetch-error",t);at(e._baseUrl+e._runtimeErrorPath,n)}))}catch(e){var o=st({url:this._url,version:this._version},"send-error",e);at(this._baseUrl+this._runtimeErrorPath,o)}}},{key:"_callCbList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!==e.length){var r,n=c(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"_mergeData",value:function(){var e=[],t=[],r={data:[],appKey:this._appKey||"unknown",baseAttributes:this._baseAttributes,sdkVersion:this._version};et()&&(r.isNewUser=tt()),this._token&&(r.token=this._token),Object.keys(this._productProfile).length>0&&(r.productProfile=this._productProfile),"string"==typeof this._userId&&this._userId.length>0&&(r.userId=this._userId);var n=this._buffer[0];n.eventType&&(r.eventType=n.eventType);var i,o=c(this._buffer);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.data,u=a.successCb,l=a.errorCb;u&&e.push(u),l&&t.push(l),s.attributes=s.attributes||{},s.attributes=Object.assign({},this._commonConfig,s.attributes),Reflect.deleteProperty(s.attributes,"$_isNewUser"),r.data.push(s)}}catch(e){o.e(e)}finally{o.f()}return{param:r,successCbList:e,errorCbList:t}}},{key:"_mapData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{eventId:e.eventId,eventType:e.attributes&&e.attributes.eventType||"biz",occurTime:e.time,attributes:e.attributes}}},{key:"_updateBaseAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={_system:e.deviceOs,_deviceId:this._deviceId,_screenWidth:e.screenWidth,_screenHeight:e.screenHeight,_cityName:e.city,_systemVersion:e.deviceOsVersion,_version:""};this._baseAttributes=t(t({},function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];null===e[i]&&void 0===e[i]||(t[i]=e[i])}return t}(r)),this._baseAttributes)}},{key:"_cancelTaskId",value:function(){this._timeoutId&&(window.clearTimeout(this._timeoutId),this._timeoutId=null)}},{key:"_fetchIsNew",value:function(e){if(!lt&&("userId"!==e||this._userId)&&("deviceId"!==e||this._deviceId)){lt=!0;var t={appKey:this._appKey},r=this._userId,n=this._deviceId;return"userId"===e?t.userId=r:"deviceId"===e&&(t.deviceId=n),this._request.get(this._isNewUrl,t).then((function(t){var i=t.code,o=t.data,a=void 0===o?{}:o;0===i?rt(a.newUser,a.timestamp):rt(!1,Date.now());"userId"===e?it(r):"deviceId"===e&&ot(n)})).catch((function(t){rt(!1,Date.now()),"userId"===e?it(r):"deviceId"===e&&ot(n)})).finally((function(){lt=!1}))}}},{key:"_isInitCorrectly",value:function(){return this._appKey}},{key:"_setIsNewUser",value:function(){if(et()){var e=window.localStorage.getItem(Qe);if(e)return void(e!==this._userId&&this._fetchIsNew("userId"));if(this._userId)return void this._fetchIsNew("userId");window.localStorage.getItem(Ze)!==this._deviceId&&this._fetchIsNew("deviceId")}else this._userId?this._fetchIsNew("userId"):this._deviceId&&this._fetchIsNew("deviceId")}}]),e}(),pt=new dt,ft="DATracker",ht="__mps",_t="__mpso",gt="__mpa",bt="__mpap",mt="__mpu",vt="attributes",yt="attributes",kt="attributes",wt="attributes",Tt="$union",St="costTime",xt=[ht,_t,gt,bt,mt,"$people_distinct_id",St];document.location.protocol;var Dt=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,At=!Dt&&-1===N.indexOf("MSIE")&&-1===N.indexOf("Mozilla"),Ot={get_path:"/track/w/",post_path:"/track/wp/",api_host:"https://hubble.netease.com",app_host:"https://hubble.netease.com",autotrack:!1,cdn:"https://hubble.netease.com",cross_subdomain_cookie:!1,persistence:"localStorage",persistence_name:"",cookie_name:"",loaded:function(){},store_google:!0,test:!1,verbose:!1,img:!1,method:"get",track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:36500,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,property_blacklist:[],session_interval_mins:30,is_single_page:!1,single_page_config:{mode:"hash",track_replace_state:!1},pageview:!0,use_app_track:!1,hubble_render_mode:!1,heatmap_url:"https://hubble.netease.com/track/w/heatmap/heatmap.js",heatmap_getdata_host:"https://hubble.netease.com",send_error:!1,control_js_url:"https://hubble.netease.com/track/w/control/control.js",visualization_editor_js_url:"https://hubble.netease.com/track/w/visualization/visualization.js",truncateLength:255,commonCookie:!0,campaigin:{useHour:!1,day:30,hour:720}},It={da_session_start:{dataType:"ie"},da_session_close:{dataType:"ie"},da_u_login:{dataType:"ie"},da_u_logout:{dataType:"ie"},da_u_signup:{dataType:"ie"},da_user_profile:{dataType:"ie"},da_screen:{dataType:"pv"},da_ad_click:{dataType:"ie"},da_activate:{dataType:"ie"},da_abtest:{dataType:"ie"},da_send_error:{dataType:"ie"}},Ct=!1,Nt=function(){};Nt.prototype.create_properties=function(){},Nt.prototype.event_handler=function(){},Nt.prototype.after_track_handler=function(){},Nt.prototype.init=function(e){return this.mp=e,this},Nt.prototype.track=function(e,t,r,n){var i=this,o=q.dom_query(e);if(0!==o.length)return q.each(o,(function(e){q.register_event(e,this.override_event,(function(e){var o={},a=i.create_properties(r,this),s=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,a,o,!0),s),i.mp.track(t,a,i.track_callback(n,a,o))}))}),this),!0;B("The DOM query ("+e+") returned 0 elements")},Nt.prototype.track_callback=function(e,t,r,n){n=n||!1;var i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},Nt.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):q.extend({},e)};var Pt=function(){this.override_event="click"};q.inherit(Pt,Nt),Pt.prototype.create_properties=function(e,t){var r=Pt.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},Pt.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},Pt.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout((function(){window.location=t.href}),0)};var Et=function(e){this.props={},e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_hubble";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(z("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie");"localStorage"===t&&function(){var e=!0;try{var t="__hbssupport__";q.localStorage.set(t,"xyz"),"xyz"!==q.localStorage.get(t)&&(e=!1),q.localStorage.remove(t)}catch(t){e=!1}return e||B("localStorage unsupported; falling back to cookie store"),e}()?this.storage=q.localStorage:this.storage=q.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};Et.prototype.properties=function(){var e={};return q.each(this.props,(function(t,r){q.include(xt,r)||(e[r]=t)})),e},Et.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=q.extend({},e))}},Et.prototype.upgrade=function(e){var t,r,n=e.upgrade;n&&(t="mp_super_properties","string"==typeof n&&(t=n),r=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),r&&(this.props=q.extend(this.props,r.all,r.events))),e.cookie_name||"DATracker"===e.name||(t="mp_"+e.token+"_"+e.name,(r=this.storage.parse(t))&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(r))),this.storage===q.localStorage&&(r=q.cookie.parse(this.name),q.cookie.remove(this.name),q.cookie.remove(this.name,!0),r&&this.register_once(r)),this.storage===q.cookie&&(r=q.localStorage.parse(this.name),q.localStorage.remove(this.name),r&&this.register_once(r))},Et.prototype.save=function(){this.disabled||this.storage.set(this.name,q.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure)},Et.prototype.remove=function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)},Et.prototype.clear=function(){this.remove(),this.props={}},Et.prototype.register_once=function(e,t,r){return!!q.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,q.each(e,(function(e,r){this.props[r]&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},Et.prototype.register=function(e,t){return!!q.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,q.extend(this.props,e),this.save(),!0)},Et.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},Et.prototype.safe_merge=function(e){return q.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},Et.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},Et.prototype.set_disabled=function(e){this.disabled=e,this.disabled&&this.remove()},Et.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},Et.prototype.get_cross_subdomain=function(){return this.cross_subdomain},Et.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},Et.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(vt),o=this._get_or_create_queue(yt),a=this._get_or_create_queue(kt),s=this._get_or_create_queue(Tt),c=this._get_or_create_queue(wt,[]);r===ht?(q.extend(i,n),this._pop_from_people_queue(kt,n),this._pop_from_people_queue(Tt,n)):r===_t?q.each(n,(function(e,t){t in o||(o[t]=e)})):r===gt?q.each(n,(function(e,t){t in i?i[t]+=e:(t in a||(a[t]=0),a[t]+=e)}),this):r===mt?q.each(n,(function(e,t){q.isArray(e)&&(t in s||(s[t]=[]),s[t]=s[t].concat(e))})):r===bt&&c.push(n),R("打印数据:"),R(t),this.save()},Et.prototype._pop_from_people_queue=function(e,t){var r=this._get_queue(e);q.isUndefined(r)||(q.each(t,(function(e,t){delete r[t]}),this),this.save())},Et.prototype._get_queue_key=function(e){return e===vt?ht:e===yt?_t:e===kt?gt:e===wt?bt:e===Tt?mt:void B("Invalid queue:",e)},Et.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},Et.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=q.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},Et.prototype.set_event_timer=function(e,t){var r=this.props[St]||{};r[e]=t,this.props[St]=r,this.save()},Et.prototype.remove_event_timer=function(e){var t=(this.props[St]||{})[e];return q.isUndefined(t)||(delete this.props[St][e],this.save()),t};var Ut=function(){},jt=function(){},Lt=$e,qt=function(e,t,r){var n,i=r===ft?ut:ut[r];if(i&&0===ct||i&&2===ct)n=i;else{if(i&&!q.isArray(i))return void B("You have already initialized "+r);n=new Ut}return n._init(e,t,r),n.people=new jt,n.people._init(n),n.abtest=Lt,n.abtest.init(n),h.DEBUG=h.DEBUG||n.get_config("debug"),n.__autotrack_enabled=n.get_config("autotrack"),!q.isUndefined(i)&&q.isArray(i)&&(n._execute_array.call(n.people,i.people),n._execute_array(i),n._execute_array.call(n.abtest,i.abtest)),n};Ut.prototype.init=function(e,t,r){if(q.isUndefined(r))B("You must name your new library: init(token, config, name)");else{if(r!==ft){var n=qt(e,t,r);return ut[r]=n,n._loaded(),n}B("You must initialize the main DATracker object right after you include the DATracker js snippet")}},Ut.prototype.oxpecker_init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&pt.setAppKey(e),pt.updateConfig(t)},Ut.prototype.oxpecker_set_url=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt.setUrl(e)},Ut.prototype.oxpecker_update_config=function(e){pt.flush(),pt.updateConfig(e)},Ut.prototype.oxpecker_remove_config=function(e){pt.flush(),pt.removeConfigByKey(e)},Ut.prototype.oxpecker_set_token=function(e){"string"==typeof e&&e.length>0&&pt.setToken(e)},Ut.prototype.oxpecker_flush=function(){pt.flush()},Ut.prototype.oxpecker_set_product_profile=function(e){pt.flush(),pt.setProductProfile(e)},Ut.prototype.oxpecker_send_by_beacon=function(){pt.sendByBeacon()},Ut.prototype.oxpecker_set_base_attributes=function(e){pt.configBaseAttributes(e)},Ut.prototype.oxpecker_config_sdk=function(e){pt.configSDK(e)},Ut.prototype._init=function(e,t,r){var n=this;n.__loaded=!0,n.config={},void 0!==t&&void 0!==t.single_page_config&&void 0===t.single_page_config.track_replace_state&&(t.single_page_config.track_replace_state=Ot.single_page_config.track_replace_state),n.pageOpenScene="Browser",n.set_config(q.extend({},Ot,t,{name:r,token:e,callback_fn:(r===ft?r:ft+"."+r)+"._jsc"})),ke.init(e),be.init(e,this),n._jsc=function(){},n.__dom_loaded_queue=[],n.__request_queue=[],n.__disabled_events=[],n._flags={disable_all_events:!1},n.persistence=n.cookie=new Et(n.config),n.cookie.register({sessionReferrer:document.referrer}),n.cookie.register_once({updatedTime:0,sessionStartTime:0}),n.cookie.register_once({sendNumClass:{allNum:0,errSendNum:0}}),n.commonCookie=Ve;var i=n.get_config("heatmap");q.isObject(i)&&(i.clickmap=i.clickmap||"default");var o=ge(n);n.get_appStatus=function(e){o.getAppStatus((function(t){try{"function"==typeof e&&e(t)}catch(e){}}))},n._get_SendCall=function(e,t,r,i){if(n.get_config("hubble_render_mode"))return!1;o.getSendCall(e,t,r,i)},Te.init(n,(function(){Lt.isTestDebug()||Lt.isEditor()?n.set_config({hubble_render_mode:!0}):n.set_config({hubble_render_mode:!1}),n._loaded(),n._send_da_activate(),n.get_config("is_single_page")&&(n.cookie.register({currentReferrer:decodeURIComponent(location.href)}),n._single_page()),n.get_config("track_pageview")?n.track_pageview():n._session()}))},Ut.prototype._sendNativeCall=function(e,t,r,n){this.get_config("use_app_track")&&"function"==typeof this._get_SendCall&&this._get_SendCall(e,t,r,n)},Ut.prototype._ad_click=function(){return this.track("da_ad_click")},Ut.prototype._session=function(e){var t=1*this.cookie.props.sessionStartTime/1e3,r=1*this.cookie.props.updatedTime/1e3;this.cookie.props.sessionUuid;var n=(new Date).getTime(),i=1*n/1e3,o=!this._check_referer();(0==t||i>r+60*this.config.session_interval_mins||o)&&(0==t?(this.cookie.register({sessionUuid:q.UUID(),sessionStartTime:(new Date).getTime()}),this._track_da_session_start()):(this._track_da_session_close(),this.cookie.register({sessionUuid:q.UUID(),sessionStartTime:(new Date).getTime()}),this._track_da_session_start())),this.cookie.register({updatedTime:n}),"function"==typeof e&&e()},Ut.prototype._track_da_session_start=function(e){return this.track("da_session_start")},Ut.prototype._track_da_session_close=function(e){var t=(new Date).getTime()-1,r=this.cookie.props.sessionStartTime;this.cookie.props.LASTEVENT&&this.cookie.props.LASTEVENT.time&&(t=this.cookie.props.LASTEVENT.time+1);var n=t,i=n-r;return this.track("da_session_close",{sessionCloseTime:n,sessionTotalLength:i})},Ut.prototype._check_referer=function(){var e=this.cookie.props.sessionReferrer,t=!0;return e?"cookie"===this.get_config("persistence")&&this.get_config("cross_subdomain_cookie")?q.get_second_domain(q.get_host(e))!=q.get_second_domain(window.location.host)&&(t=!1):q.get_host(e)!=window.location.host&&(t=!1):t=!0,t},Ut.prototype._single_page=function(){var e=this,t=decodeURIComponent(location.href),r=function(){},n=function(){q.innerEvent.trigger("singlePage:change")};"hash"===this.get_config("single_page_config").mode?r=function(){e.cookie.register({sessionReferrer:t}),e._single_pageview(),t=decodeURIComponent(location.href),n()}:"history"===this.get_config("single_page_config").mode&&(r=function(){e._single_pageview(),n()}),ye.init({mode:this.get_config("single_page_config").mode,callback_fn:r,track_replace_state:this.get_config("single_page_config").track_replace_state})},Ut.prototype._loaded=function(){this.get_config("loaded")(this)},Ut.prototype._dom_loaded=function(){q.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),q.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},Ut.prototype._track_dom=function(e,t){if(this.get_config("img"))return B("You can't use DOM tracking functions with img = true."),!1;if(!Ct)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},Ut.prototype._prepare_callback=function(e,t){if(q.isUndefined(e))return null;if(Dt){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(i){delete r[n],e(i,t)},i},Ut.prototype._send_request=function(e,t,r,n,i,o){if(At)this.__request_queue.push(arguments);else if("post"!==o&&"post"!==this.get_config("method")){var a=this.get_config("verbose");if(t.verbose&&(a=!0),this.get_config("test")&&(t.test=1),a&&(t.verbose=1),this.get_config("img")&&(t.img=1,e+="da.gif"),Dt||(r?t.callback=r:(a||this.get_config("test"))&&(t.callback="(function(){})")),t._=(new Date).getTime().toString(),e+="?"+q.HTTPBuildQuery(t),"img"in t){var s=document.createElement("img");s.src=e,s.width=1,s.height=1,"function"==typeof r&&r(0),s.onload=function(){this.onload=null},s.onerror=function(){this.onerror=null},s.onabort=function(){this.onabort=null}}else if(Dt)try{var c=new XMLHttpRequest;c.open("GET",e,!0),c.withCredentials=!1,c.onreadystatechange=function(){if(4===c.readyState)if(i&&i(),200===c.status)r&&r(a?q.JSONDecode(c.responseText):Number(c.responseText));else{var e="Bad HTTP status: "+c.status+" "+c.statusText;B(e),r&&r(a?{status:0,error:e}:0),n&&n({state:c.status,statusText:c.statusText})}},c.send(null)}catch(e){B(e),i&&i(),n&&n({state:"notSend",statusText:e})}else{var u=document.createElement("script");u.type="text/javascript",u.async=!0,u.defer=!0,u.src=e;var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(u,l)}}else this._send_request_post(e,t,r,n,i)},Ut.prototype._send_request_post=function(e,t,r,n,i){if(Dt)try{var o=new XMLHttpRequest;o.open("POST",e,!0),o.withCredentials=!1,o.onreadystatechange=function(){if(4===o.readyState)if(i&&i(),200===o.status)r&&r(Number(o.responseText));else{var e="Bad HTTP status: "+o.status+" "+o.statusText;B(e),r&&r(0),n&&n({state:o.status,statusText:o.statusText})}},t._=(new Date).getTime().toString(),o.send(q.HTTPBuildQuery(t))}catch(e){B(e),i&&i(),n&&n({state:"notSend",statusText:e})}},Ut.prototype._execute_array=function(e){var t,r=[],n=[],i=[];q.each(e,(function(e){e&&(t=e[0],"function"==typeof e?e.call(this):q.isArray(e)&&"alias"===t?r.push(e):q.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))}),this);var o=function(e,t){q.each(e,(function(e){q.isFunction(this[e[0]])&&this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(n,this),o(i,this)},Ut.prototype.push=function(e){this._execute_array([e])},Ut.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},Ut.prototype.track=function(e,t,n,i,o){var a=o||this.get_config("method");if("function"!=typeof n&&(n=function(){}),q.isUndefined(e))B("No event name provided to DATracker.track");else{if(!this._event_is_disabled(e)){this.cookie.load(),t=t||{};var s={},c={};c="post"===a?JSON.parse(JSON.stringify(t)):q.JSONDecode(q.JSONEncode(t));var u=this.persistence.remove_event_timer(e);if(!q.isUndefined(u)){var l=(new Date).getTime()-u;s[St]=l}"da_session_close"==e&&(s.sessionCloseTime=c.sessionCloseTime,s.sessionTotalLength=c.sessionTotalLength,delete c.sessionCloseTime,delete c.sessionTotalLength),t=q.extend({},q.info.properties(),this.persistence.properties(),s);var d=this.get_config("property_blacklist");q.isArray(d)?q.each(d,(function(e){delete t[e]})):B("Invalid value for property_blacklist config: "+d);var p="e";It[e]?p=It[e].dataType:i&&(p=i),q.include(["da_session_start","da_session_close","da_activate"],e)||this._session(),"e"===p&&(this._check_referer()||this.cookie.register({sessionReferrer:decodeURIComponent(location.href)})),this.get_config("is_single_page")||q.include(["da_activate","da_session_close"],e)&&this.cookie.register({sessionReferrer:decodeURIComponent(location.href)}),this.get_config("is_single_page")&&t.sessionReferrer!=t.referrer&&(t.referrer=t.sessionReferrer,t.referring_domain=q.info.referringDomain(t.sessionReferrer));var f=(new Date).getTime();"da_session_close"==e&&(f=t.sessionCloseTime),"da_session_start"==e&&(f=t.sessionStartTime),this.register_once({persistedTime:f},"");var h={dataType:p,sessionUuid:this.cookie.props.sessionUuid,userId:this.persistence.props.user_id,currentUrl:t.current_url,referrer:t.referrer,referrerDomain:t.referring_domain,sdkVersion:t.lib_version,sdkType:"js",deviceOs:t.deviceOs,deviceOsVersion:t.deviceOsVersion,devicePlatform:t.hb_lib,browser:t.browser,browserVersion:t.browser_version,screenWidth:t.screen_width,screenHeight:t.screen_height,sessionTotalLength:t.sessionTotalLength,eventId:e,appKey:this.get_config("token"),time:f,persistedTime:this.cookie.props.persistedTime,deviceUdid:this.get_distinct_id(),deviceModel:q.trim(t.deviceModel),pageTitle:t.title,urlPath:t.url_path,currentDomain:t.currentDomain,pageOpenScene:this.pageOpenScene},_=be.getParams(),g=ke.getParams();if(h=q.extend(h,_),h=q.extend(h,g),c=q.extend({},this.cookie.props.superProperties||{},c),"pv"===p&&"object"===r(this.pageview_attributes)&&(c=q.extend({},this.pageview_attributes||{},c)),this.get_config("commonCookie")&&(c=q.extend({},c,Ve.getCookie()||{})),h.attributes=c,h.referrer||delete h.referrer,h.referrerDomain||delete h.referrerDomain,h.pageTitle||delete h.pageTitle,h.urlPath||delete h.urlPath,h.userId||delete h.userId,t[St]&&(h[St]=t[St],delete t[St]),this.get_config("hubble_render_mode"))return Lt.debugTrack(h),!1;try{if("e"===h.dataType){pt.addBuffer(h,null,null);var b=pt.getIsNewInfo();null!==b&&(h.attributes.$_isNewUser=b);var m=pt.getUserSetDeviceId();if(m&&(h.deviceUdid=m),pt.disableHubbleSend())return;if(pt.isDebugMode())return}}catch(e){B("oxpecker-sdk error: ---",e)}var v=this.get_config("truncateLength"),y=h;"[object Number]"===Object.prototype.toString.call(v)&&v>0&&(y=q.truncate(h,v));var k=q.JSONEncode(y),w=q.base64Encode(k),T=q.sha1(this.get_config("token"));R(ft+" REQUEST:"),R(y);var S=this,x=function(){var t=S.cookie.props.sendNumClass;"da_session_start"===e&&(t.allNum=0,t.errSendNum=0),"da_send_error"!==e&&"da_activate"!==e&&(t.allNum+=1),S.cookie.register({sendNumClass:t})},D=function(t){if("da_send_error"!==e&&"da_activate"!==e){var r=S.cookie.props.sendNumClass.errSendNum;S.cookie.props.sendNumClass.allNum,"da_session_start"===e&&(r=0),r+=1,S.get_config("send_error")&&(t=q.extend({eventId:e,time:f,allNum:S.cookie.props.sendNumClass.allNum,errSendNum:r},t),S.track("da_send_error",t)),S.cookie.register({sendNumClass:{allNum:S.cookie.props.sendNumClass.allNum,errSendNum:r}})}},A=function(){var e=S.get_config("api_host")+S.get_config("get_path");"post"===a&&(e=S.get_config("api_host")+S.get_config("post_path")),S._send_request(e,{data:w,appKey:T},S._prepare_callback(n,y),D,x,a)};return this.get_config("use_app_track")?this._sendNativeCall(k,e,n,A):A(),this.get_config("debug")&&q.isFunction(this.debug)&&(this.get_config("use_app_track")&&q.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],e)||this.debug({data:w})),q.include(["da_session_close","da_session_start"],e)||this.cookie.register({LASTEVENT:{eventId:e,time:f}}),y}n(0)}},Ut.prototype.track_pageview=function(e,t,r){q.isUndefined(t)&&(t=decodeURIComponent(document.location.href));var n=this;this._session((function(){var t=n.track("da_screen",q.extend({},e));"function"==typeof r&&r(t)}))},Ut.prototype._send_da_activate=function(){var e={};return this.get_distinct_id()||(this.register_once({deviceUdid:q.UUID()},""),e=this.track("da_activate")),e},Ut.prototype.register_attributes=function(e){if("object"===r(e)){var t=this.cookie.props.superProperties||{};t=q.extend({},t,e),this.register({superProperties:t})}},Ut.prototype.register_attributes_once=function(e){if("object"===r(e)){var t=this.cookie.props.superProperties||{};t=q.extend({},e,t),this.register({superProperties:t})}},Ut.prototype.current_attributes=function(e){"function"==typeof e&&e(this.cookie.props.superProperties||{})},Ut.prototype.unregister_attributes=function(e){if("string"==typeof e){var t=this.cookie.props.superProperties||{};delete t[e],this.register({superProperties:t})}},Ut.prototype.clear_attributes=function(){this.register({superProperties:{}})},Ut.prototype.single_pageview=function(){},Ut.prototype._single_pageview=function(){var e=decodeURIComponent(location.href),t=this.cookie.props.currentReferrer||decodeURIComponent(location.href);this.get_config("is_single_page")&&("hash"!==this.get_config("single_page_config").mode&&"history"!==this.get_config("single_page_config").mode&&"memoryhistory"!==this.get_config("single_page_config").mode||this.cookie.register({sessionReferrer:t,currentReferrer:e}),this.track_pageview({},e))},Ut.prototype.track_links=function(){return this._track_dom.call(this,Pt,arguments)},Ut.prototype.time_event=function(e){q.isUndefined(e)?B("No event name provided to DATracker.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())},Ut.prototype.register=function(e,t){this.persistence.register(e,t)},Ut.prototype.register_once=function(e,t,r){this.persistence.register_once(e,t,r)},Ut.prototype.unregister=function(e){this.persistence.unregister(e)},Ut.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},Ut.prototype.signup=function(e){var t=this.get_user_id();if((t=null==t?"":t)!=e)return this._register_single("user_id",e),this.track("da_u_signup",{oldUserId:t,newUserId:e})},Ut.prototype.login=function(e){q.innerEvent.trigger("userId:change",{type:"login",userId:e});var t=this.signup(e),r=this.track("da_u_login");return this._register_single("user_id",e),{data_signup:t,data_login:r}},Ut.prototype.logout=function(e){q.innerEvent.trigger("userId:change",{type:"logout",userId:this.get_distinct_id()}),this.unregister("user_id");var t=!1;function r(){t||(t=!0,"function"==typeof e&&e())}return setTimeout(r,this.get_config("track_links_timeout")),this.track("da_u_logout",{},r)},Ut.prototype.set_userId=function(e){this._register_single("user_id",e)},Ut.prototype.reset=function(){this.persistence.clear(),this.register_once({deviceUdid:q.UUID()},"")},Ut.prototype.get_distinct_id=function(){return this.get_property("deviceUdid")},Ut.prototype.get_user_id=function(){return this.get_property("user_id")},Ut.prototype.set_config=function(e){q.isObject(e)&&(q.extend(this.config,e),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),h.DEBUG=h.DEBUG||this.get_config("debug"))},Ut.prototype.get_config=function(e){return this.config[e]},Ut.prototype.get_property=function(e){return this.persistence.props[e]},Ut.prototype.toString=function(){var e=this.get_config("name");return e!==ft&&(e=ft+"."+e),e},Ut.prototype._event_is_disabled=function(e){return q.isBlockedUA(N)||this._flags.disable_all_events||q.include(this.__disabled_events,e)},jt.prototype._init=function(e){this._DATracker=e},jt.prototype.set=function(e,t,r){var n={},i={};return q.isObject(e)?(q.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_set",i={$userProfile:i}),n[vt]=i,this._send_request(n,r)},jt.prototype.set_once=function(e,t,r){var n={},i={};return q.isObject(e)?(q.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_set_once",i={$userProfile:i}),n[yt]=i,this._send_request(n,r)},jt.prototype.set_realname=function(e){this.set({$realName:e})},jt.prototype.set_country=function(e){this.set({$country:e})},jt.prototype.set_province=function(e){this.set({$region:e})},jt.prototype.set_region=function(e){this.set({$region:e})},jt.prototype.set_city=function(e){this.set({$city:e})},jt.prototype.set_age=function(e){this.set({$age:e})},jt.prototype.set_gender=function(e){0!=e&&1!=e&&2!=e||this.set({$gender:e})},jt.prototype.set_birthday=function(e){q.checkTime(e)&&this.set({$birthday:e})},jt.prototype.set_account=function(e){this.set({$account:e})},jt.prototype.set_populationWithAccount=function(e,t,r,n){e&&t&&r&&n&&q.checkTime(r)&&this.set({$account:e,$realName:t,$birthday:r,$gender:n})},jt.prototype.set_location=function(e,t,r){e&&t&&r&&this.set({$country:e,$region:t,$city:r})},jt.prototype.append=function(e,t,r){var n={},i={};return q.isObject(e)?(q.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_append",i={$userProfile:i}),n[yt]=i,this._send_request(n,r)},jt.prototype.toString=function(){return this._DATracker.toString()+".people"},jt.prototype._send_request=function(e,t){if(this._DATracker.cookie.props.hubble_render_mode)return!1;e.dataType="ie",e.appKey=this._get_config("token"),e.deviceUdid=this._DATracker.get_distinct_id(),e.userId=this._DATracker.get_user_id(),e.time=(new Date).getTime(),e.sdkType="js",e.eventId="da_user_profile",e.persistedTime=this._DATracker.cookie.props.persistedTime,e.pageOpenScene="Browser";var r=be.getParams(),n=ke.getParams();e=q.extend(e,r),e=q.extend(e,n);var i=q.encodeDates(e),o=this._DATracker.get_config("truncateLength"),a=i;"[object Number]"===Object.prototype.toString.call(o)&&o>0&&(a=q.truncate(i,o));var s=q.JSONEncode(i),c=q.base64Encode(s);R("打印数据:"),R(a);var u=q.sha1(this._DATracker.get_config("token")),l=this,d=function(){var e=l._DATracker.get_config("api_host")+l._DATracker.get_config("get_path");"post"===l._DATracker.get_config("method")&&(e=l._DATracker.get_config("api_host")+l._DATracker.get_config("post_path")),l._DATracker._send_request(e,{data:c,appKey:u},l._DATracker._prepare_callback(t,a))};return this._DATracker.get_config("use_app_track")?this._DATracker._sendNativeCall(s,"$da_user_profile",t,d):d(),this._DATracker.get_config("debug")&&q.isFunction(this._DATracker.debug)&&this._DATracker.debug({data:c}),a},jt.prototype._get_config=function(e){return this._DATracker.get_config(e)},jt.prototype._user_logined=function(){return void 0!==this._DATracker.get_user_id()},jt.prototype._enqueue=function(e){vt in e?this._DATracker.persistence._add_to_people_queue(vt,e):yt in e?this._DATracker.persistence._add_to_people_queue(yt,e):kt in e?this._DATracker.persistence._add_to_people_queue(kt,e):wt in e?this._DATracker.persistence._add_to_people_queue(wt,e):Tt in e?this._DATracker.persistence._add_to_people_queue(Tt,e):B("Invalid call to _enqueue():",e)},jt.prototype._is_reserved_property=function(e){return"$deviceUdid"===e||"$token"===e},Ut.prototype.init=Ut.prototype.init,Ut.prototype.reset=Ut.prototype.reset,Ut.prototype.disable=Ut.prototype.disable,Ut.prototype.time_event=Ut.prototype.time_event,Ut.prototype.track=Ut.prototype.track,Ut.prototype.track_links=Ut.prototype.track_links,Ut.prototype.track_pageview=Ut.prototype.track_pageview,Ut.prototype.register=Ut.prototype.register,Ut.prototype.register_once=Ut.prototype.register_once,Ut.prototype.unregister=Ut.prototype.unregister,Ut.prototype.alias=Ut.prototype.alias,Ut.prototype.set_config=Ut.prototype.set_config,Ut.prototype.get_config=Ut.prototype.get_config,Ut.prototype.get_property=Ut.prototype.get_property,Ut.prototype.get_distinct_id=Ut.prototype.get_distinct_id,Ut.prototype.toString=Ut.prototype.toString,Ut.prototype.login=Ut.prototype.login,Ut.prototype.logout=Ut.prototype.logout,Ut.prototype.get_user_id=Ut.prototype.get_user_id,Ut.prototype.register_attributes=Ut.prototype.register_attributes,Ut.prototype.register_attributes_once=Ut.prototype.register_attributes_once,Ut.prototype.clear_attributes=Ut.prototype.clear_attributes,Ut.prototype.unregister_attributes=Ut.prototype.unregister_attributes,Ut.prototype.current_attributes=Ut.prototype.current_attributes,Ut.prototype.oxpecker_init=Ut.prototype.oxpecker_init,Ut.prototype.oxpecker_set_url=Ut.prototype.oxpecker_set_url,Ut.prototype.oxpecker_update_config=Ut.prototype.oxpecker_update_config,Ut.prototype.oxpecker_remove_config=Ut.prototype.oxpecker_remove_config,Ut.prototype.oxpecker_set_token=Ut.prototype.oxpecker_set_token,Ut.prototype.oxpecker_flush=Ut.prototype.oxpecker_flush,Ut.prototype.oxpecker_set_product_profile=Ut.prototype.oxpecker_set_product_profile,Ut.prototype.oxpecker_send_by_beacon=Ut.prototype.oxpecker_send_by_beacon,Ut.prototype.oxpecker_set_base_attributes=Ut.prototype.oxpecker_set_base_attributes,Ut.prototype.oxpecker_config_sdk=Ut.prototype.oxpecker_config_sdk,Et.prototype.properties=Et.prototype.properties,Et.prototype.get_cross_subdomain=Et.prototype.get_cross_subdomain,Et.prototype.clear=Et.prototype.clear,jt.prototype.set=jt.prototype.set,jt.prototype.set_once=jt.prototype.set_once,jt.prototype.append=jt.prototype.append,jt.prototype.toString=jt.prototype.toString;var Rt={},Bt=function(){ut.init=function(e,t,r){if(r)return ut[r]||(ut[r]=Rt[r]=qt(e,t,r)),ut[r];var n=ut;Rt[ft]?n=Rt[ft]:e&&(n=qt(e,t,ft),Rt[ft]=n),ut=n,1!==ct&&2!==ct||(window[ft]=ut),q.each(Rt,(function(e,t){t!==ft&&(ut[t]=e)})),ut._=q}};try{ct=1,ut=window[ft],q.isUndefined(ut)?z('"DATracker" object not initialized. Ensure you are using the latest version of the DATracker JS Library along with the snippet we provide.'):ut.__loaded||ut.config&&ut.persistence?B("DATracker library has already been downloaded at least once."):(ut.__SV||0)<1.1?z("Version mismatch; please ensure you're using the latest version of the DATracker code snippet."):(q.each(ut._i,(function(e){e&&q.isArray(e)&&(Rt[e[e.length-1]]=qt.apply(this,e))})),Bt(),ut.init(),q.each(Rt,(function(e){})),function(){function e(){e.done||(e.done=!0,Ct=!0,At=!1,q.each(Rt,(function(e){e._dom_loaded()})))}if(document.addEventListener)"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e);var t=!1;try{t=null===window.frameElement}catch(e){}document.documentElement.doScroll&&t&&function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}q.register_event(window,"load",e,!0)}())}catch(ce){console.log(ce)}}();
